var Gn=Object.defineProperty;var o=(i,e)=>Gn(i,"name",{value:e,configurable:!0});var b=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Mt=b(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});var Ct=class Ct extends Error{constructor(e,t){super(e),this.statusCode=t||0}};o(Ct,"RequestError");var Rt=Ct;vt.default=Rt});var ii=b(fe=>{"use strict";var Yn=fe&&fe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(fe,"__esModule",{value:!0});var zn=Yn(Mt()),It=class It extends zn.default{constructor(e,t,r){super(e),this.response=t,this.statusCode=r||0}};o(It,"PlayerRequestError");var Ot=It;fe.default=Ot});var ni=b(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});var Nt=class Nt extends Error{constructor(e,t=null){super(e),this.playabilityStatus=t}};o(Nt,"UnrecoverableError");var Lt=Nt;Dt.default=Lt});var ai=b(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});var qt=class qt extends Error{constructor(e){super(e)}};o(qt,"PlatformError");var Ut=qt;kt.default=Ut});var he=b(M=>{"use strict";var Fe=M&&M.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(M,"__esModule",{value:!0});M.PlatformError=M.RequestError=M.UnrecoverableError=M.PlayerRequestError=void 0;var Xn=ii();Object.defineProperty(M,"PlayerRequestError",{enumerable:!0,get:o(function(){return Fe(Xn).default},"get")});var Qn=ni();Object.defineProperty(M,"UnrecoverableError",{enumerable:!0,get:o(function(){return Fe(Qn).default},"get")});var Jn=Mt();Object.defineProperty(M,"RequestError",{enumerable:!0,get:o(function(){return Fe(Jn).default},"get")});var Zn=ai();Object.defineProperty(M,"PlatformError",{enumerable:!0,get:o(function(){return Fe(Zn).default},"get")})});var R=b($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.Logger=void 0;var ea=v(),ta={red:"",green:"",yellow:"",blue:"",magenta:"",reset:""},ra={red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",reset:"\x1B[0m"},Ht=class Ht{static replaceColorTags(e){try{e=e.replace(/<magenta>/g,this.outputControlCharacter.magenta),e=e.replace(/<\/magenta>/g,this.outputControlCharacter.reset),e=e.replace(/<debug>/g,this.outputControlCharacter.magenta),e=e.replace(/<\/debug>/g,this.outputControlCharacter.reset),e=e.replace(/<blue>/g,this.outputControlCharacter.blue),e=e.replace(/<\/blue>/g,this.outputControlCharacter.reset),e=e.replace(/<info>/g,this.outputControlCharacter.blue),e=e.replace(/<\/info>/g,this.outputControlCharacter.reset),e=e.replace(/<green>/g,this.outputControlCharacter.green),e=e.replace(/<\/green>/g,this.outputControlCharacter.reset),e=e.replace(/<success>/g,this.outputControlCharacter.green),e=e.replace(/<\/success>/g,this.outputControlCharacter.reset),e=e.replace(/<yellow>/g,this.outputControlCharacter.yellow),e=e.replace(/<\/yellow>/g,this.outputControlCharacter.reset),e=e.replace(/<warning>/g,this.outputControlCharacter.yellow),e=e.replace(/<\/warning>/g,this.outputControlCharacter.reset),e=e.replace(/<red>/g,this.outputControlCharacter.red),e=e.replace(/<\/red>/g,this.outputControlCharacter.reset),e=e.replace(/<error>/g,this.outputControlCharacter.red),e=e.replace(/<\/error>/g,this.outputControlCharacter.reset)}catch{}return e}static convertMessage(e){return this.replaceColorTags(e)}static convertMessages(e){return e.map(t=>this.replaceColorTags(t))}static initialization(){ea.Platform.getShim().runtime==="default"&&(this.outputControlCharacter=ra)}static debug(...e){this.logDisplay.includes("debug")&&console.log(this.convertMessage("<debug>[  DEBUG  ]:</debug>"),...this.convertMessages(e))}static info(...e){this.logDisplay.includes("info")&&console.info(this.convertMessage("<info>[  INFO!  ]:</info>"),...this.convertMessages(e))}static success(...e){this.logDisplay.includes("success")&&console.log(this.convertMessage("<success>[ SUCCESS ]:</success>"),...this.convertMessages(e))}static warning(...e){this.logDisplay.includes("warning")&&console.warn(this.convertMessage("<warning>[ WARNING ]:</warning>"),...this.convertMessages(e))}static error(...e){this.logDisplay.includes("error")&&console.error(this.convertMessage("<error>[  ERROR  ]:</error>"),...this.convertMessages(e))}};o(Ht,"Logger");var be=Ht;$e.Logger=be;be.logDisplay=["info","success","warning","error"];be.outputControlCharacter=ta});var v=b(j=>{"use strict";var ia=j&&j.__classPrivateFieldSet||function(i,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(i,t):n?n.value=t:e.set(i,t),t},oi=j&&j.__classPrivateFieldGet||function(i,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)},Ve,je;Object.defineProperty(j,"__esModule",{value:!0});j.Platform=void 0;var na=he(),aa=R(),Bt=class Bt{static load(e){e.fileCache.initialization(),ia(this,Ve,e,"f",je),aa.Logger.initialization()}static getShim(){if(!oi(this,Ve,"f",je))throw new na.PlatformError("Platform is not loaded");return oi(this,Ve,"f",je)}};o(Bt,"Platform");var Ke=Bt;j.Platform=Ke;Ve=Ke;je={value:void 0}});var si=b((Js,oa)=>{oa.exports={name:"@ybd-project/ytdl-core",version:"6.0.5",description:"YBD Project fork of ytdl-core.",author:"YBD Project",repository:{type:"git",url:"git://github.com/ybd-project/ytdl-core.git"},engines:{node:">=16.0"},main:"./package/platforms/Default/Default.js",types:"./package/platforms/Default/Default.d.ts",exports:{".":{types:"./package/platforms/Default/Default.d.ts",node:{import:"./package/platforms/Default/Default.js",require:"./bundle/node.cjs"},browser:"./package/platforms/Browser/Browser.js",default:"./package/platforms/Default/Default.js"},"./default":{types:"./package/platforms/Default/Default.d.ts",default:"./package/platforms/Default/Default.js"},"./default.bundle":{types:"./package/platforms/Default/Default.d.ts",default:"./bundle/node.cjs"},"./browser":{types:"./package/platforms/Browser/Browser.d.ts",default:"./package/platforms/Browser/Browser.js"},"./browser.bundle":{types:"./package/platforms/Browser/Browser.d.ts",default:"./bundle/browser.min.js"},"./serverless":{types:"./package/platforms/Serverless/Serverless.d.ts",default:"./package/platforms/Serverless/Serverless.js"},"./serverless.bundle":{types:"./package/platforms/Serverless/Serverless.d.ts",default:"./bundle/serverless.cjs"},"./types":{types:"./package/types/index.d.ts",default:"./package/types/index.d.ts"}},files:["package","bundle"],scripts:{test:"npx jest ./test/main.test.ts --detectOpenHandles","clear-cache-files":"cd package/core && rmdir /s /q CacheFiles 2>nul & cd ../..",build:"node ./scripts/getPlayerData.mjs && rmdir /s /q package & tsc && tsc-alias && npm run clear-cache-files && npm run create-bundles","publish:npm":"node ./scripts/publish.mjs latest && npm run build && npm publish --registry=https://registry.npmjs.org/","publish:npm-alpha":"node ./scripts/publish.mjs alpha && npm run build && npm publish --registry=https://registry.npmjs.org/ --tag alpha","publish:npm-beta":"node ./scripts/publish.mjs beta && npm run build && npm publish --registry=https://registry.npmjs.org/ --tag beta","create-bundles":"npm run create-node-bundle && npm run create-browser-bundle && npm run create-serverless-bundle","create-node-bundle":"rmdir /s /q bundle & mkdir bundle && esbuild ./package/platforms/Default/Default.js --bundle --target=node16 --keep-names --format=cjs --platform=node --outfile=./bundle/node.cjs --minify","create-browser-bundle":"node ./scripts/createBrowserBundle.mjs","create-serverless-bundle":"esbuild ./package/platforms/Serverless/Serverless.js --bundle --target=node16 --keep-names --format=cjs --platform=node --outfile=./bundle/serverless.cjs --minify",update:"ncu && ncu -u && npm i","deleteNodeModules:examples":"node ./scripts/deleteExamplesNodeModules.js"},dependencies:{"bgutils-js":"^3.0.0",jsdom:"^25.0.1",undici:"^6.20.1"},devDependencies:{"@inquirer/prompts":"^7.0.0","@types/jest":"^29.5.13","@types/jsdom":"^21.1.7","@types/node":"^22.7.7","@types/sax":"^1.2.7",esbuild:"^0.24.0",eslint:"^9.13.0",jest:"^29.7.0","npm-check-updates":"^17.1.4","ts-jest":"^29.2.5","tsc-alias":"^1.8.10",typescript:"^5.6.3"},keywords:["youtube","video","audio","download","getInfo","ybd-project","ytdl","ytdl-core","secure","fast","browser","serverless","typescript"],license:"MIT"}});var pe=b(w=>{"use strict";var sa=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(w,"__esModule",{value:!0});w.ISSUES_URL=w.REPO_NAME=w.USER_NAME=w.VERSION=w.CURRENT_PLAYER_ID=void 0;var la=sa(si());w.CURRENT_PLAYER_ID="fb725ac8";w.VERSION=la.default.version;w.USER_NAME="ybd-project-ver1";w.REPO_NAME="ytdl-core";w.ISSUES_URL=`https://github.com/${w.USER_NAME}/${w.REPO_NAME}/issues`});var k=b(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.Url=void 0;var U="https://www.youtube.com",ua=/^https?:\/\//,li=/^[a-zA-Z0-9-_]{11}$/,ca=new Set(["youtube.com","www.youtube.com","m.youtube.com","music.youtube.com","gaming.youtube.com"]),da=/^https?:\/\/(youtu\.be\/|(www\.)?youtube\.com\/(embed|v|shorts|live)\/)/,Ft=class Ft{static getBaseUrl(){return U}static getPlayerJsUrl(e){return`${U}/s/player/${e}/player_ias.vflset/en_US/base.js`}static getWatchPageUrl(e){return`${U}/watch?v=${e}`}static getEmbedUrl(e){return`${U}/embed/${e}`}static getIframeApiUrl(){return`${U}/iframe_api`}static getInnertubeBaseUrl(){return`${U}/youtubei/v1`}static getTvUrl(){return`${U}/tv`}static getTokenApiUrl(){return`${U}/o/oauth2/token`}static getDeviceCodeApiUrl(){return`${U}/o/oauth2/device/code`}static validateID(e){return li.test(e.trim())}static getURLVideoID(e){let t=new URL(e.trim()),r=t.searchParams.get("v");if(da.test(e.trim())&&!r){let n=t.pathname.split("/");r=t.host==="youtu.be"?n[1]:n[2]}else if(t.hostname&&!ca.has(t.hostname))throw new Error("Not a YouTube domain");if(!r)throw new Error(`No video id found: "${e}"`);if(r=r.substring(0,11),!this.validateID(r))throw new TypeError(`Video id (${r}) does not match expected format (${li.toString()})`);return r}static getVideoID(e){return this.validateID(e)?e:ua.test(e.trim())?this.getURLVideoID(e):null}static validateURL(e){try{return this.getURLVideoID(e),!0}catch{return!1}}};o(Ft,"Url");var xt=Ft;We.Url=xt});var ge=b(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.UserAgent=void 0;var ui={desktop:["Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.3 Safari/605.1.15","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.61"],ios:["Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/127.0.0.0 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 15_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/126.0.1.45 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 14_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/123.0.2.98 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/125.0.3.110 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/124.0.5.72 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 14_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/122.0.4.82 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/128.0.1.101 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 15_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/125.0.1.95 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 14_8 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/121.0.2.67 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 16_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/129.0.0.85 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/126.0.3.92 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 14_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/123.0.5.105 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/127.0.2.56 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPad; CPU OS 15_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/124.0.1.30 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 14_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/120.0.4.102 Mobile/15E148 Safari/604.1"],android:["Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.146 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 14; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.128 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 11; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 14; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.128 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 9; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.6613.146 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 12; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/128.0.6613.127 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/26.0 Chrome/122.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/92.0.4515.105 Mobile Safari/537.36"],tv:["Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version"]},$t=class $t{static getRandomUserAgent(e){let t=ui[e];return t?t[Math.floor(Math.random()*t.length)]:ui.desktop[0]}};o($t,"UserAgent");var Q=$t;Ge.UserAgent=Q;Q.default="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36";Q.ios="com.google.ios.youtube/19.29.1 (iPhone16,2; U; CPU iOS 17_5_1 like Mac OS X;)";Q.android="com.google.android.youtube/18.48.37(Linux; U; Android 13; en_US; sdk_gphone64_x86_64 Build/UPB4.230623.005) gzip";Q.tv="Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version"});var te=b(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.Fetcher=void 0;var fa=v(),ha=R(),ba=ge(),pa=he(),me=class me{static async fetch(e,t,r=!1){var s;let n=fa.Platform.getShim(),{rewriteRequest:l,originalProxy:u}=n.requestRelated;if(!r){if(typeof l=="function"){let a=l(e,t||{},{isDownloadUrl:!1});t=a.options,e=a.url}if(u)try{let a=new URL(u.base);e.includes(a.host)||(e=`${a.protocol}//${a.host}/?${u.urlQueryName||"url"}=${encodeURIComponent(e)}`)}catch{}}ha.Logger.debug(`[ Request ]: <magenta>${(t==null?void 0:t.method)||"GET"}</magenta> -> ${e}`);let c=new n.polyfills.Headers;return t!=null&&t.headers&&Object.entries(t.headers).forEach(([a,d])=>{d&&c.append(a,d.toString())}),c.has("User-Agent")||c.append("User-Agent",ba.UserAgent.getRandomUserAgent("desktop")),await n.fetcher(e,{method:(t==null?void 0:t.method)||"GET",headers:c,body:(s=t==null?void 0:t.body)==null?void 0:s.toString()})}static async request(e,{requestOptions:t,rewriteRequest:r,originalProxy:n}={}){var a;if(typeof r=="function"){let d=r(e,t||{},{isDownloadUrl:!1});t=d.options,e=d.url}if(n)try{let d=new URL(n.base);e.includes(d.host)||(e=`${d.protocol}//${d.host}${d.pathname}?${n.urlQueryName||"url"}=${encodeURIComponent(e)}`)}catch{}let l=await me.fetch(e,{method:(t==null?void 0:t.method)||"GET",headers:t==null?void 0:t.headers,body:(a=t==null?void 0:t.body)==null?void 0:a.toString()},!0),u=l.status.toString(),c=l.headers.get("location")||null;if(u.startsWith("2"))return(l.headers.get("content-type")||"").includes("application/json")?l.json():l.text();if(u.startsWith("3")&&c)return me.request(c.toString(),{requestOptions:t,rewriteRequest:r,originalProxy:n});throw new pa.RequestError(`Status Code: ${u}`,l.status)}};o(me,"Fetcher");var Vt=me;Ye.Fetcher=Vt});var ye=b(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.lastUpdateCheck=void 0;P.between=Kt;P.tryParseBetween=di;P.parseAbbreviatedNumber=fi;P.cutAfterJS=hi;P.checkForUpdates=mi;P.getPropInsensitive=bi;P.setPropInsensitive=pi;P.generateClientPlaybackNonce=gi;var ga=v(),ma=te(),ya=pe(),jt=R(),_a=[{start:'"',end:'"'},{start:"'",end:"'"},{start:"`",end:"`"},{start:"/",end:"/",startPrefix:/(^|[[{:;,/])\s?$/}],Ta=1e3*60*60*12;function ci(i,e){return Object.keys(i).find(t=>t.toLowerCase()===e.toLowerCase())||null}o(ci,"findPropKeyInsensitive");function Kt(i,e,t){let r=null;if(e instanceof RegExp){let n=i.match(e);if(!n)return"";r=(n.index||0)+n[0].length}else{if(r=i.indexOf(e),r===-1)return"";r+=e.length}return i=i.slice(r),r=i.indexOf(t),r===-1?"":(i=i.slice(0,r),i)}o(Kt,"between");function di(i,e,t,r="",n=""){try{let l=Kt(i,e,t);return l?JSON.parse(`${r}${l}${n}`):null}catch{return null}}o(di,"tryParseBetween");function fi(i){let e=i.replace(",",".").replace(" ","").match(/([\d,.]+)([MK]?)/);if(e){let t=e[2],r=e[1];return r=parseFloat(r),Math.round(t==="M"?r*1e6:t==="K"?r*1e3:r)}return null}o(fi,"parseAbbreviatedNumber");function hi(i){let e=null,t=null;if(i[0]==="["?(e="[",t="]"):i[0]==="{"&&(e="{",t="}"),!e)throw new Error(`Can't cut unsupported JSON (need to begin with [ or { ) but got: ${i[0]}`);let r=null,n=!1,l=0;for(let u=0;u<i.length;u++){if(r!==null&&!n&&i[u]===r.end){r=null;continue}else if(!n&&r===null){for(let c of _a)if(i[u]===c.start&&(!c.startPrefix||i.substring(u-10,u).match(c.startPrefix))){r=c;break}if(r!==null)continue}if(n=i[u]==="\\"&&!n,r===null&&(i[u]===e?l++:i[u]===t&&l--,l===0))return i.slice(0,u+1)}throw new Error("Can't cut unsupported JSON (no matching closing bracket found)")}o(hi,"cutAfterJS");function bi(i,e){let t=ci(i,e);return t&&i[t]}o(bi,"getPropInsensitive");function pi(i,e,t){let r=ci(i,e);return i[r||e]=t,r}o(pi,"setPropInsensitive");function gi(i){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";return Array.from({length:i},()=>e[Math.floor(Math.random()*e.length)]).join("")}o(gi,"generateClientPlaybackNonce");var wa=0,ze=0;P.lastUpdateCheck=ze;function mi(){let i=ga.Platform.getShim();if(!i.options.other.noUpdate&&Date.now()-ze>=Ta){P.lastUpdateCheck=ze=Date.now();let t=`https://raw.githubusercontent.com/${i.info.repo.user}/${i.info.repo.name}/dev/package.json`;ma.Fetcher.request(t,{requestOptions:{headers:{"User-Agent":'Chromium";v="112", "Microsoft Edge";v="112", "Not:A-Brand";v="99'}}}).then(r=>{JSON.parse(r).version!==ya.VERSION&&wa++<5&&jt.Logger.warning('@ybd-project/ytdl-core is out of date! Update with "npm install @ybd-project/ytdl-core@latest".')},r=>{jt.Logger.warning("Error checking for updates:",r.message),jt.Logger.warning("It can be disabled by setting `noUpdate` to `true` in the YtdlCore options.")})}}o(mi,"checkForUpdates");P.default={between:Kt,tryParseBetween:di,parseAbbreviatedNumber:fi,cutAfterJS:hi,lastUpdateCheck:ze,checkForUpdates:mi,getPropInsensitive:bi,setPropInsensitive:pi,generateClientPlaybackNonce:gi}});var x=b(re=>{"use strict";var Ea=re&&re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(re,"__esModule",{value:!0});re.Clients=void 0;var Wt=Ea(ye()),K=ge(),Pa=k(),q=Pa.Url.getInnertubeBaseUrl(),H=Object.freeze({web:{context:{client:{clientName:"WEB",clientVersion:"2.20240726.00.00",userAgent:K.UserAgent.default}},clientName:1,apiInfo:{key:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8"}},webCreator:{context:{client:{clientName:"WEB_CREATOR",clientVersion:"1.20240918.03.00",userAgent:K.UserAgent.default}},clientName:62,apiInfo:{key:"AIzaSyBUPetSUmoZL-OhlxA7wSac5XinrygCqMo"}},webEmbedded:{context:{client:{clientName:"WEB_EMBEDDED_PLAYER",clientVersion:"2.20240111.09.00",userAgent:K.UserAgent.default,clientScreen:"EMBED"}},clientName:56,apiInfo:{key:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8"}},android:{context:{client:{clientName:"ANDROID",clientVersion:"18.48.37",androidSdkVersion:33,userAgent:K.UserAgent.android,osName:"Android",osVersion:"13"}},clientName:3,apiInfo:{key:"AIzaSyA8eiZmM1FaDVjRy-df2KTyQ_vz_yYM39w"}},ios:{context:{client:{clientName:"IOS",clientVersion:"19.29.1",deviceMake:"Apple",deviceModel:"iPhone16,2",userAgent:K.UserAgent.ios,osName:"iPhone",osVersion:"17.5.1.21F90"}},clientName:5,apiInfo:{key:"AIzaSyB-63vPrdThhKuerbB2N_l7Kwwcxj6yUAc"}},mweb:{context:{client:{clientName:"MWEB",clientVersion:"2.20240726.01.00",userAgent:K.UserAgent.default}},clientName:2,apiInfo:{}},tv:{context:{client:{clientName:"TVHTML5",clientVersion:"7.20240724.13.00",userAgent:K.UserAgent.tv}},clientName:7,apiInfo:{}},tvEmbedded:{context:{client:{clientName:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",clientVersion:"2.0",userAgent:K.UserAgent.tv},thirdParty:{embedUrl:"https://www.youtube.com/"}},clientName:85,apiInfo:{}}}),B={videoId:"",cpn:Wt.default.generateClientPlaybackNonce(16),contentCheckOk:!0,racyCheckOk:!0,serviceIntegrityDimensions:{},playbackContext:{contentPlaybackContext:{vis:0,splay:!1,referer:"",currentUrl:"",autonavState:"STATE_ON",autoCaptionsDefaultOn:!1,html5Preference:"HTML5_PREF_WANTS",lactMilliseconds:"-1",signatureTimestamp:0}},attestationRequest:{omitBotguardData:!0},context:{client:{},request:{useSsl:!0,internalExperimentFlags:[],consistencyTokenJars:[]},user:{lockedSafetyMode:!1}}},O=class O{static getAuthorizationHeader(e){return e&&e.isEnabled?{authorization:"Bearer "+e.getAccessToken(),"X-Goog-AuthUser":"0"}:{}}static web({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let s=H.web,a={...B};return a.videoId=e,a.playbackContext.contentPlaybackContext.signatureTimestamp=t,a.context.client=s.context.client,a.context.client.hl=u||"en",a.context.client.gl=c||"US",r?a.serviceIntegrityDimensions.poToken=r:a.serviceIntegrityDimensions=void 0,n&&(a.context.client.visitorData=n),{url:`${q}/player?key=${s.apiInfo.key}&prettyPrint=false`,payload:a,headers:{"X-YouTube-Client-Name":s.clientName,"X-Youtube-Client-Version":s.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":s.context.client.userAgent,...O.getAuthorizationHeader(l)}}}static web_nextApi({videoId:e,options:{poToken:t,visitorData:r,oauth2:n,hl:l,gl:u}}){let c=H.web,s={...B,autonavState:"STATE_OFF",playbackContext:{vis:0,lactMilliseconds:"-1"},captionsRequested:!1};return s.videoId=e,s.context.client=c.context.client,s.context.client.hl=l||"en",s.context.client.gl=u||"US",t?s.serviceIntegrityDimensions.poToken=t:s.serviceIntegrityDimensions=void 0,r&&(s.context.client.visitorData=r),{url:`${q+"/next"}?key=${c.apiInfo.key}&prettyPrint=false`,payload:s,headers:{"X-YouTube-Client-Name":c.clientName,"X-Youtube-Client-Version":c.context.client.clientVersion,"X-Goog-Visitor-Id":r,"User-Agent":c.context.client.userAgent,...O.getAuthorizationHeader(n)}}}static webCreator({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let s=H.webCreator,a={...B};return a.videoId=e,a.playbackContext.contentPlaybackContext.signatureTimestamp=t,a.context.client=s.context.client,a.context.client.hl=u||"en",a.context.client.gl=c||"US",r?a.serviceIntegrityDimensions.poToken=r:a.serviceIntegrityDimensions=void 0,n&&(a.context.client.visitorData=n),{url:`${q}/player?key=${s.apiInfo.key}&prettyPrint=false`,payload:a,headers:{"X-YouTube-Client-Name":s.clientName,"X-Youtube-Client-Version":s.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":s.context.client.userAgent,...O.getAuthorizationHeader(l)}}}static webEmbedded({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let s=H.webEmbedded,a={...B};return a.videoId=e,a.playbackContext.contentPlaybackContext.signatureTimestamp=t,a.context.client=s.context.client,a.context.client.hl=u||"en",a.context.client.gl=c||"US",r?a.serviceIntegrityDimensions.poToken=r:a.serviceIntegrityDimensions=void 0,n&&(a.context.client.visitorData=n),{url:`${q}/player?key=${s.apiInfo.key}&prettyPrint=false`,payload:a,headers:{"X-YouTube-Client-Name":s.clientName,"X-Youtube-Client-Version":s.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":s.context.client.userAgent,...O.getAuthorizationHeader(l)}}}static android({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let s=H.android,a={...B};return a.videoId=e,a.playbackContext.contentPlaybackContext.signatureTimestamp=t,a.context.client=s.context.client,a.context.client.hl=u||"en",a.context.client.gl=c||"US",r?a.serviceIntegrityDimensions.poToken=r:a.serviceIntegrityDimensions=void 0,n&&(a.context.client.visitorData=n),{url:`${q}/player?key=${s.apiInfo.key}&prettyPrint=false&id=${e}&t=${Wt.default.generateClientPlaybackNonce(12)}`,payload:a,headers:{"X-YouTube-Client-Name":s.clientName,"X-Youtube-Client-Version":s.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":s.context.client.userAgent,...O.getAuthorizationHeader(l)}}}static ios({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let s=H.ios,a={...B};return a.videoId=e,a.playbackContext.contentPlaybackContext.signatureTimestamp=t,a.context.client=s.context.client,a.context.client.hl=u||"en",a.context.client.gl=c||"US",r?a.serviceIntegrityDimensions.poToken=r:a.serviceIntegrityDimensions=void 0,n&&(a.context.client.visitorData=n),{url:`${q}/player?key=${s.apiInfo.key}&prettyPrint=false&id=${e}&t=${Wt.default.generateClientPlaybackNonce(12)}`,payload:a,headers:{"X-YouTube-Client-Name":s.clientName,"X-Youtube-Client-Version":s.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":s.context.client.userAgent,...O.getAuthorizationHeader(l)}}}static mweb({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let s=H.mweb,a={...B};return a.videoId=e,a.playbackContext.contentPlaybackContext.signatureTimestamp=t,a.context.client=s.context.client,a.context.client.hl=u||"en",a.context.client.gl=c||"US",r?a.serviceIntegrityDimensions.poToken=r:a.serviceIntegrityDimensions=void 0,n&&(a.context.client.visitorData=n),{url:`${q}/player?prettyPrint=false`,payload:a,headers:{"X-YouTube-Client-Name":s.clientName,"X-Youtube-Client-Version":s.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":s.context.client.userAgent,...O.getAuthorizationHeader(l)}}}static tv({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let s=H.tv,a={...B};return a.videoId=e,a.playbackContext.contentPlaybackContext.signatureTimestamp=t,a.context.client=s.context.client,a.context.client.hl=u||"en",a.context.client.gl=c||"US",r?a.serviceIntegrityDimensions.poToken=r:a.serviceIntegrityDimensions=void 0,n&&(a.context.client.visitorData=n),{url:`${q}/player?prettyPrint=false`,payload:a,headers:{"X-YouTube-Client-Name":s.clientName,"X-Youtube-Client-Version":s.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":s.context.client.userAgent,...O.getAuthorizationHeader(l)}}}static tvEmbedded({videoId:e,signatureTimestamp:t,options:{poToken:r,visitorData:n,oauth2:l,hl:u,gl:c}}){let s=H.tvEmbedded,a={...B};return a.videoId=e,a.playbackContext.contentPlaybackContext.signatureTimestamp=t,a.context.client=s.context.client,a.context.client.hl=u||"en",a.context.client.gl=c||"US",r?a.serviceIntegrityDimensions.poToken=r:a.serviceIntegrityDimensions=void 0,n&&(a.context.client.visitorData=n),{url:`${q}/player?prettyPrint=false`,payload:a,headers:{"X-YouTube-Client-Name":s.clientName,"X-Youtube-Client-Version":s.context.client.clientVersion,"X-Goog-Visitor-Id":n,"User-Agent":s.context.client.userAgent,...O.getAuthorizationHeader(l)}}}};o(O,"Clients");var Gt=O;re.Clients=Gt});var F=b(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});var Sa=v(),Xe=he(),yi=te(),Aa=R(),_i=Sa.Platform.getShim(),Xt=class Xt{static playError(e){let t=e&&e.playabilityStatus;if(!t)return null;let r=e.playabilityStatus.reason||null;return t.status==="ERROR"||t.status==="LOGIN_REQUIRED"?new Xe.UnrecoverableError(t.reason||t.messages&&t.messages[0]||"Unknown error.",r):t.status==="LIVE_STREAM_OFFLINE"?new Xe.UnrecoverableError(t.reason||"The live stream is offline.",r):t.status==="UNPLAYABLE"?new Xe.UnrecoverableError(t.reason||"This video is unavailable.",r):null}static request(e,t,r,n){return new Promise(async(l,u)=>{let c={"Content-Type":"application/json","X-Origin":"https://www.youtube.com",...t.headers},s={requestOptions:{method:"POST",headers:c,body:typeof t.payload=="string"?t.payload:JSON.stringify(t.payload)},rewriteRequest:r.options.rewriteRequest,originalProxy:r.options.originalProxy},a=e.includes("/next"),d=!r.options.disableRetryRequest&&((s.originalProxy||s.rewriteRequest)&&_i.runtime!=="browser"||c.Authorization),y=o((f,p=!1)=>{let _=this.playError(f);if(_)return!p&&d?h(_):u({isError:!0,error:_,contents:f});if(!a&&(!f.videoDetails||r.videoId!==f.videoDetails.videoId)){let m=new Xe.PlayerRequestError("Malformed response from YouTube",f,null);return m.response=f,!p&&d?h(m):u({isError:!0,error:m,contents:f})}l({isError:!1,error:null,contents:f})},"responseHandler"),h=o(f=>{var _;s.originalProxy=void 0,s.rewriteRequest=void 0;let p=new _i.polyfills.Headers((_=s.requestOptions)==null?void 0:_.headers);p.delete("Authorization"),s.requestOptions||(s.requestOptions={}),s.requestOptions.headers=p,Aa.Logger.debug(`[ ${n} ]: <info>Wait 2 seconds</info> and <warning>retry request...</warning> (Reason: <error>${f==null?void 0:f.message}</error>)`),setTimeout(()=>{yi.Fetcher.request(e,s).then(m=>y(m,!0)).catch(m=>{u({isError:!0,error:m,contents:null})})},2e3)},"retryRequest");try{yi.Fetcher.request(e,s).then(f=>y(f,!1)).catch(f=>{if(d)return h(f);u({isError:!0,error:f,contents:null})})}catch(f){u({isError:!0,error:f,contents:null})}})}};o(Xt,"Base");var Yt=Xt;zt.default=Yt});var Ei=b(_e=>{"use strict";var Ra=_e&&_e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_e,"__esModule",{value:!0});var Ti=x(),wi=Ra(F()),Jt=class Jt{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Ti.Clients.web(e);return await wi.default.request(t,{payload:r,headers:n},e,"Web")}static async getNextResponse(e){let{url:t,payload:r,headers:n}=Ti.Clients.web_nextApi(e);return await wi.default.request(t,{payload:r,headers:n},e,"Next")}};o(Jt,"Web");var Qt=Jt;_e.default=Qt});var Pi=b(Te=>{"use strict";var va=Te&&Te.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Te,"__esModule",{value:!0});var Ca=x(),Ma=va(F()),er=class er{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Ca.Clients.webCreator(e);return await Ma.default.request(t,{payload:r,headers:n},e,"WebCreator")}};o(er,"WebCreator");var Zt=er;Te.default=Zt});var Si=b(we=>{"use strict";var Oa=we&&we.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(we,"__esModule",{value:!0});var Ia=x(),La=Oa(F()),rr=class rr{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Ia.Clients.webEmbedded(e);return await La.default.request(t,{payload:r,headers:n},e,"WebEmbedded")}};o(rr,"WebEmbedded");var tr=rr;we.default=tr});var Ai=b(Ee=>{"use strict";var Da=Ee&&Ee.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ee,"__esModule",{value:!0});var Na=x(),Ua=Da(F()),nr=class nr{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Na.Clients.mweb(e);return await Ua.default.request(t,{payload:r,headers:n},e,"MWeb")}};o(nr,"MWeb");var ir=nr;Ee.default=ir});var Ri=b(Pe=>{"use strict";var ka=Pe&&Pe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pe,"__esModule",{value:!0});var qa=x(),Ha=ka(F()),or=class or{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=qa.Clients.android(e);return await Ha.default.request(t,{payload:r,headers:n},e,"Android")}};o(or,"Android");var ar=or;Pe.default=ar});var vi=b(Se=>{"use strict";var Ba=Se&&Se.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Se,"__esModule",{value:!0});var xa=x(),Fa=Ba(F()),lr=class lr{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=xa.Clients.ios(e);return await Fa.default.request(t,{payload:r,headers:n},e,"Ios")}};o(lr,"Ios");var sr=lr;Se.default=sr});var Ci=b(Ae=>{"use strict";var $a=Ae&&Ae.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ae,"__esModule",{value:!0});var Va=x(),ja=$a(F()),cr=class cr{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Va.Clients.tv(e);return await ja.default.request(t,{payload:r,headers:n},e,"Tv")}};o(cr,"Tv");var ur=cr;Ae.default=ur});var Mi=b(Re=>{"use strict";var Ka=Re&&Re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Re,"__esModule",{value:!0});var Wa=x(),Ga=Ka(F()),fr=class fr{static async getPlayerResponse(e){let{url:t,payload:r,headers:n}=Wa.Clients.tvEmbedded(e);return await Ga.default.request(t,{payload:r,headers:n},e,"TvEmbedded")}};o(fr,"TvEmbedded");var dr=fr;Re.default=dr});var Qe=b(T=>{"use strict";var W=T&&T.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(T,"__esModule",{value:!0});T.TvEmbedded=T.Tv=T.Ios=T.Android=T.MWeb=T.WebEmbedded=T.WebCreator=T.Web=void 0;var Ya=Ei();Object.defineProperty(T,"Web",{enumerable:!0,get:o(function(){return W(Ya).default},"get")});var za=Pi();Object.defineProperty(T,"WebCreator",{enumerable:!0,get:o(function(){return W(za).default},"get")});var Xa=Si();Object.defineProperty(T,"WebEmbedded",{enumerable:!0,get:o(function(){return W(Xa).default},"get")});var Qa=Ai();Object.defineProperty(T,"MWeb",{enumerable:!0,get:o(function(){return W(Qa).default},"get")});var Ja=Ri();Object.defineProperty(T,"Android",{enumerable:!0,get:o(function(){return W(Ja).default},"get")});var Za=vi();Object.defineProperty(T,"Ios",{enumerable:!0,get:o(function(){return W(Za).default},"get")});var eo=Ci();Object.defineProperty(T,"Tv",{enumerable:!0,get:o(function(){return W(eo).default},"get")});var to=Mi();Object.defineProperty(T,"TvEmbedded",{enumerable:!0,get:o(function(){return W(to).default},"get")})});var pr=b(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.OAuth2=void 0;var ro=v(),S=R(),ie=k(),io=ge(),no=Qe(),ve=te(),hr={tvScript:new RegExp('<script\\s+id="base-js"\\s+src="([^"]+)"[^>]*><\\/script>'),clientIdentity:new RegExp('clientId:"(?<client_id>[^"]+)",[^"]*?:"(?<client_secret>[^"]+)"')},Ce=ro.Platform.getShim().fileCache,Je=class Je{constructor(e){var t,r;if(this.isEnabled=!1,this.credentials={accessToken:"",refreshToken:"",expiryDate:""},this.accessToken="",this.refreshToken="",this.expiryDate="",!e){this.isEnabled=!1;return}if(this.isEnabled=!0,this.credentials=e,this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiryDate=e.expiryDate,this.clientId=(t=e.clientData)==null?void 0:t.clientId,this.clientSecret=(r=e.clientData)==null?void 0:r.clientSecret,this.shouldRefreshToken())try{this.refreshAccessToken().finally(()=>this.availableTokenCheck())}catch{}else this.availableTokenCheck();Ce.set("oauth2",JSON.stringify(e))}async availableTokenCheck(){try{let e=await Ce.get("html5Player");no.Web.getPlayerResponse({videoId:"dQw4w9WgXcQ",signatureTimestamp:parseInt((e==null?void 0:e.signatureTimestamp)||"0")||0,options:{oauth2:this}}).then(()=>S.Logger.debug("The specified OAuth2 token is valid.")).catch(t=>{t.error.message.includes("401")&&this.error("Request using the specified token failed (Web Client). Generating the token again may fix the problem.")})}catch(e){(e.message||e.error.message).includes("401")&&this.error("Request using the specified token failed (Web Client). Generating the token again may fix the problem.")}}error(e){S.Logger.error(e),S.Logger.info("OAuth2 is disabled due to an error."),this.isEnabled=!1}async getClientData(){var u,c,s,a,d,y,h;let e=await Ce.get("oauth2")||{};if((u=e.clientData)!=null&&u.clientId&&((c=e.clientData)!=null&&c.clientSecret))return{clientId:e.clientData.clientId,clientSecret:e.clientData.clientSecret};let t={"User-Agent":io.UserAgent.tv,Referer:ie.Url.getTvUrl()},r=await ve.Fetcher.fetch(ie.Url.getTvUrl(),{headers:t});if(!r.ok)return this.error("Failed to get client data: "+r.status),null;let n=await r.text(),l=(s=hr.tvScript.exec(n))==null?void 0:s[1];if(l){S.Logger.debug("Found YouTube TV script: "+l);let f=await ve.Fetcher.fetch(ie.Url.getBaseUrl()+l,{headers:t});if(!f.ok)return this.error("TV script request failed with status code: "+f.status),null;let p=await f.text(),_=(d=(a=hr.clientIdentity.exec(p))==null?void 0:a.groups)==null?void 0:d.client_id,m=(h=(y=hr.clientIdentity.exec(p))==null?void 0:y.groups)==null?void 0:h.client_secret;return!_||!m?(this.error("Could not obtain client ID. Please create an issue in the repository for possible specification changes on YouTube's side."),null):(S.Logger.debug("Found client ID: "+_),S.Logger.debug("Found client secret: "+m),{clientId:_,clientSecret:m})}return this.error("Could not obtain script URL. Please create an issue in the repository for possible specification changes on YouTube's side."),null}shouldRefreshToken(){return this.isEnabled?Date.now()>=new Date(this.expiryDate).getTime():!1}async refreshAccessToken(){if(this.isEnabled){if(!this.clientId||!this.clientSecret){let e=await this.getClientData();if(!e)return;this.clientId=e.clientId,this.clientSecret=e.clientSecret,Ce.set("oauth2",JSON.stringify({accessToken:this.accessToken,refreshToken:this.refreshToken,expiryDate:this.expiryDate,clientData:{clientId:e.clientId,clientSecret:e.clientSecret}}))}if(!this.refreshToken)return this.error("Refresh token is missing, make sure it is specified.");try{let e={client_id:this.clientId,client_secret:this.clientSecret,refresh_token:this.refreshToken,grant_type:"refresh_token"},t=await ve.Fetcher.fetch(ie.Url.getTokenApiUrl(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)return this.error(`Failed to refresh access token: ${t.status}`);let r=await t.json();if(r.error_code)return this.error("Authorization server returned an error: "+JSON.stringify(r));this.expiryDate=new Date(Date.now()+r.expires_in*1e3).toISOString(),this.accessToken=r.access_token}catch(e){this.error(e.message)}}}getAccessToken(){return this.accessToken}getCredentials(){return this.credentials}static async createOAuth2Credentials(e){return new Promise(async t=>{let r=await Ce.get("oauth2");if(console.log(r),r)return t(r);let n=new Je(null);function l(){t(null)}o(l,"errorHandle");function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){let s=Math.random()*16|0;return(c=="x"?s:s&3|8).toString(16)})}o(u,"generateUuidV4"),n.getClientData().then(c=>{if(!c)return t(null);let{clientId:s,clientSecret:a}=c;ve.Fetcher.fetch(ie.Url.getDeviceCodeApiUrl(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,scope:"http://gdata.youtube.com https://www.googleapis.com/auth/youtube-paid-content",device_id:u(),device_model:"ytlr::"})}).then(d=>d.json()).then(d=>{if(d.error||d.error_code)return S.Logger.error("[ OAuth2 ]: The OAuth2 credential could not be generated because of failure to obtain the device code."),l();S.Logger.info(`[ OAuth2 ]: Please open the following URL and follow the instructions: <debug>${d.verification_url}</debug>`),S.Logger.info(`[ OAuth2 ]: Please enter the following code: <warning>${d.user_code}</warning>`),typeof e=="function"&&e({verificationUrl:d.verification_url,code:d.user_code});let y=JSON.stringify({client_id:s,client_secret:a,code:d.device_code,grant_type:"http://oauth.net/grant_type/device/1.0"}),h=setInterval(async()=>{let f=await(await ve.Fetcher.fetch(ie.Url.getTokenApiUrl(),{method:"POST",headers:{"Content-Type":"application/json"},body:y})).json();if(f.error){switch(f.error){case"authorization_pending":case"slow_down":S.Logger.debug("[ OAuth2 ]: Polling for access token...");break;case"access_denied":{S.Logger.error("[ OAuth2 ]: Generation of OAuth2 credentials failed because access to the API was forbidden."),t(null),clearInterval(h);break}case"expired_token":{S.Logger.error("[ OAuth2 ]: OAuth2 credential generation failed because the device code has expired."),t(null),clearInterval(h);break}default:{S.Logger.error("[ OAuth2 ]: OAuth2 credential generation failed because the API responded with the following error code:"+f.error),t(null),clearInterval(h);break}}return}S.Logger.debug(`[ OAuth2 ]: Success to obtain access token: <success>${f.access_token}</success>`),t({accessToken:f.access_token,refreshToken:f.refresh_token,expiryDate:new Date(Date.now()+f.expires_in*1e3).toISOString(),clientData:{clientId:s,clientSecret:a}}),clearInterval(h)},d.interval*1e3)}).catch(l)}).catch(l)})}};o(Je,"OAuth2");var br=Je;Ze.OAuth2=br});var at=b(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.Signature=void 0;var ao=v(),rt=R(),oo=["\\bm=([a-zA-Z0-9$]{2,})\\(decodeURIComponent\\(h\\.s\\)\\)","\\bc&&\\(c=([a-zA-Z0-9$]{2,})\\(decodeURIComponent\\(c\\)\\)",'(?:\\b|[^a-zA-Z0-9$])([a-zA-Z0-9$]{2,})\\s*=\\s*function\\(\\s*a\\s*\\)\\s*\\{\\s*a\\s*=\\s*a\\.split\\(\\s*""\\s*\\)','([\\w$]+)\\s*=\\s*function\\((\\w+)\\)\\{\\s*\\2=\\s*\\2\\.split\\(""\\)\\s*;'],Me="[a-zA-Z_\\$][a-zA-Z_0-9]*",et=`\\"?${Me}\\"?`,so='(?:\\[\\"|\\.)',lo='(?:\\"\\]|)',uo=so+Me+lo,co=":function\\(a\\)\\{(?:return )?a\\.reverse\\(\\)\\}",fo=":function\\(a,b\\)\\{return a\\.slice\\(b\\)\\}",ho=":function\\(a,b\\)\\{a\\.splice\\(0,b\\)\\}",bo=":function\\(a,b\\)\\{var c=a\\[0\\];a\\[0\\]=a\\[b%a\\.length\\];a\\[b(?:%a.length|)\\]=c(?:;return a)?\\}",po=`function(?: ${Me})?\\(a\\)\\{a=a\\.split\\(""\\);\\s*((?:(?:a=)?${Me}${uo}\\(a,\\d+\\);)+)return a\\.join\\(""\\)\\}`,go=`var (${Me})=\\{((?:(?:${et}${co}|${et}${fo}|${et}${ho}|${et}${bo}),?\\n?)+)\\};`,g="[a-zA-Z0-9$_]",Oi=`${g}+`,Ii="\\[(\\d+)]",mo=[`${g}+="nn"\\[\\+${g}+\\.${g}+],${g}+=${g}+\\.get\\(${g}+\\)\\)&&\\(${g}+=(${g}+)\\[(\\d+)]`,`${g}+="nn"\\[\\+${g}+\\.${g}+],${g}+=${g}+\\.get\\(${g}+\\)\\).+\\|\\|(${g}+)\\(""\\)`,`\\(${g}=String\\.fromCharCode\\(110\\),${g}=${g}\\.get\\(${g}\\)\\)&&\\(${g}=(${Oi})(?:${Ii})?\\(${g}\\)`,`\\.get\\("n"\\)\\)&&\\(${g}=(${Oi})(?:${Ii})?\\(${g}\\)`,'(\\w+).length\\|\\|\\w+\\(""\\)','\\w+.length\\|\\|(\\w+)\\(""\\)'],yo='function\\(\\s*(\\w+)\\s*\\)\\s*\\{var\\s*(\\w+)=(?:\\1\\.split\\(.*?\\)|String\\.prototype\\.split\\.call\\(\\1,.*?\\)),\\s*(\\w+)=(\\[.*?]);\\s*\\3\\[\\d+](.*?try)(\\{.*?})catch\\(\\s*(\\w+)\\s*\\)\\s*\\{\\s*return"enhanced_except_([A-z0-9-]+)"\\s*\\+\\s*\\1\\s*}\\s*return\\s*(\\2\\.join\\(""\\)|Array\\.prototype\\.join\\.call\\(\\2,""\\))};',_r="sig",Tr="ncode",gr="YBDProjectDecipherFunc",Li="YBDProjectNTransformFunc",_o=/signatureTimestamp:(\d+)/g,it=ao.Platform.getShim(),tt=it.fileCache,Di=!1,Ni=!1;function Hi(i,e){let t=e.match(new RegExp(i,"s"));if(!t)throw new Error(`Could not match ${i}`);return t}o(Hi,"matchRegex");function mr(i,e){return Hi(i,e)[0]}o(mr,"matchFirst");function ne(i,e){return Hi(i,e)[1]}o(ne,"matchGroup1");function Bi(i,e){let t;for(let r of e)try{t=ne(r,i);try{t=ne(`${t.replace(/\$/g,"\\$")}=\\[([a-zA-Z0-9$\\[\\]]{2,})\\]`,i)}catch{}break}catch{continue}if(!t||t.includes("["))throw Error();return t}o(Bi,"getFunctionName");function Ui(i,e){for(let t of i)try{let r=t(e);if(!r)continue;return r}catch{continue}return null}o(Ui,"getExtractFunctions");function To(i){try{let e=mr(go,i),t=mr(po,i),r=`var ${gr}=${t};`,n=`${gr}(${_r});`;return e+r+n}catch{return null}}o(To,"extractDecipherFunc");function wo(i){try{let e=Bi(i,oo),t=`(${e.replace(/\$/g,"\\$")}function\\([a-zA-Z0-9_]+\\)\\{.+?\\})`,r=`var ${ne(t,i)};`,n=ne(";([A-Za-z0-9_\\$]{2,})\\.\\w+\\(",r),l=`(var ${n.replace(/\$/g,"\\$")}=\\{[\\s\\S]+?\\}\\};)`,u=ne(l,i),c=`${gr}(${_r});`;return u+r+c}catch{return null}}o(wo,"extractDecipherWithName");function Eo(i){try{let e=mr(yo,i),t=`var ${Li}=${e};`,r=`${Li}(${Tr});`;return t+r}catch{return null}}o(Eo,"extractNTransformFunc");function Po(i){try{let e=Bi(i,mo),t=`(${e.replace(/\$/g,"\\$")}=\\s*function([\\S\\s]*?\\}\\s*return (([\\w$]+?\\.join\\(""\\))|(Array\\.prototype\\.join\\.call\\([\\w$]+?,[\\n\\s]*(("")|(\\("",""\\)))\\)))\\s*\\}))`,r=`var ${ne(t,i)};`,n=`${e}(${Tr});`;return r+n}catch{return null}}o(Po,"extractNTransformWithName");function ki(i,e={}){let t=Object.entries(e).map(([r,n])=>n.includes("YBDProject")?`var ${r}=${n};`:`var ${r}="${n}";`).join("");return it.polyfills.eval(t+i)}o(ki,"runInNewContext");function qi(i,e,t){if(!e)return;let r=o(c=>{var y,h;let s=new URLSearchParams("?"+c),a=((y=s.get("url"))==null?void 0:y.toString())||"",d=s.get("s");if(!d)return a;try{let f=new URL(decodeURIComponent(a)),p={};return p[_r]=decodeURIComponent(d),f.searchParams.set(((h=s.get("sp"))==null?void 0:h.toString())||"sig",ki(e,p)),f.toString()}catch(f){return rt.Logger.debug(`[ Decipher ]: <error>Failed</error> to decipher URL: <error>${f}</error>`),a}},"decipher"),n=o(c=>{let s=new URL(decodeURIComponent(c)),a=s.searchParams.get("n");if(!a||!t)return c;try{let d={};return d[Tr]=a,s.searchParams.set("n",ki(t,d)),s.toString()}catch(d){return rt.Logger.debug(`[ NTransform ]: <error>Failed</error> to transform N: <error>${d}</error>`),c}},"nTransform"),l=!i.url,u=i.url||i.signatureCipher||i.cipher;u&&(i.url=n(l?r(u):u),delete i.signatureCipher,delete i.cipher)}o(qi,"setDownloadURL");var wr=class wr{constructor(){this.decipherFunction=null,this.nTransformFunction=null}static getSignatureTimestamp(e){if(!e)return"0";let t=e.match(_o);return t?t[0].split(":")[1]:"0"}decipherFormat(e){return qi(e,this.decipherFunction,this.nTransformFunction),e}decipherFormats(e){let t={};return e.forEach(r=>{r&&(qi(r,this.decipherFunction,this.nTransformFunction),t[r.url]=r)}),t}async getDecipherFunctions(e,t){let r=this.decipherFunction||await tt.get("decipherFunction");if(r)return this.decipherFunction||(this.decipherFunction=r),r;let n=Ui([wo,To],t);return!n&&!Di&&(rt.Logger.warning(`Could not parse decipher function.
Please report this issue with "${e}" in Issues at ${it.info.issuesUrl}.
Stream URL will be missing.`),Di=!0),tt.set("decipherFunction",n||"",{ttl:60*60*24}),this.decipherFunction=n,n}async getNTransform(e,t){let r=this.nTransformFunction||await tt.get("nTransformFunction");if(r)return this.nTransformFunction||(this.nTransformFunction=r),r;if(this.nTransformFunction)return this.nTransformFunction;let n=Ui([Eo,Po],t);return!n&&!Ni&&(rt.Logger.warning(`Could not parse n transform function.
Please report this issue with "${e}" in Issues at ${it.info.issuesUrl}.`),Ni=!0),tt.set("nTransformFunction",n||"",{ttl:60*60*24}),this.nTransformFunction=n,n}};o(wr,"Signature");var yr=wr;nt.Signature=yr});var st=b(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.getHtml5Player=Co;var So=v(),Ao=at(),ot=te(),xi=k(),Ro=pe(),Er=So.Platform.getShim(),Fi=`https://raw.githubusercontent.com/${Er.info.repo.user}/${Er.info.repo.name}/dev/data/player`,$i=Er.fileCache;function vo(i){if(!i)return null;let e=i.match(/player\\\/([a-zA-Z0-9]+)\\\//);return e?e[1]:null}o(vo,"getPlayerId");async function Co(i){let e=await $i.get("html5Player");if(e&&e.url)return{url:e.url,body:e.body,id:e.id,signatureTimestamp:e.signatureTimestamp};let t,r;try{let c=await ot.Fetcher.request(xi.Url.getIframeApiUrl(),{...i,requestOptions:{headers:{"x-browser-channel":"stable","x-browser-copyright":"Copyright 2024 Google LLC. All rights reserved.","x-browser-validation":"g+9zsjnuPhmKvFM5e6eaEzcB1JY=","x-browser-year":"2024"}}});t=vo(c)}catch{}if(!t)try{let c=JSON.parse(await ot.Fetcher.request(Fi+"/data.json"));t=c.playerId,r=c.signatureTimestamp}catch{}t||(t=Ro.CURRENT_PLAYER_ID);let n=xi.Url.getPlayerJsUrl(t),l=(n?await ot.Fetcher.request(n,i):"")||await ot.Fetcher.request(Fi+"/base.js"),u={url:n,body:l||null,id:t,signatureTimestamp:r||n&&Ao.Signature.getSignatureTimestamp(l)||""};return $i.set("html5Player",JSON.stringify(u)),u}o(Co,"getHtml5Player")});var Rr=b(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.FormatParser=void 0;var Mo=te(),Oo=k(),Ar=class Ar{static parseFormats(e){let t=[];return e&&e.streamingData&&(t=t.concat(e.streamingData.formats).concat(e.streamingData.adaptiveFormats)),t}static async getM3U8(e,t){let r=new URL(e,Oo.Url.getBaseUrl()),n=await Mo.Fetcher.request(r.toString(),t),l={};return n.split(`
`).filter(u=>/^https?:\/\//.test(u)).forEach(u=>{let c=u.match(/\/itag\/(\d+)\//)||[],s=parseInt(c[1]);l[u]={itag:s,url:u}}),l}static parseAdditionalManifests(e,t){let r=e&&e.streamingData,n=[];return r&&r.hlsManifestUrl&&n.push(this.getM3U8(r.hlsManifestUrl,t)),n}};o(Ar,"FormatParser");var Sr=Ar;lt.FormatParser=Sr});var Or=b(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});var Vi=R(),Mr=class Mr{static checkResponse(e,t){var r,n,l;try{if(e.status==="fulfilled")return e.value===null?null:(Vi.Logger.debug(`[ ${t} ]: <success>Success</success>`),Object.assign({},e.value));{let u=e.reason||{};return Vi.Logger.debug(`[ ${t} ]: <error>Error</error> (Reason: <error>${((r=u.error)==null?void 0:r.message)||((n=u.error)==null?void 0:n.toString())}</error>)`),u}}catch{return(l=e||{})==null?void 0:l.reason}}};o(Mr,"ApiBase");var vr=Mr;Cr.default=vr});var Ki=b(Oe=>{"use strict";var Io=Oe&&Oe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Oe,"__esModule",{value:!0});var Lr;(function(i){i[i.web=0]="web",i[i.webCreator=1]="webCreator",i[i.webEmbedded=2]="webEmbedded",i[i.tvEmbedded=3]="tvEmbedded",i[i.ios=4]="ios",i[i.android=5]="android",i[i.mweb=6]="mweb",i[i.tv=7]="tv"})(Lr||(Lr={}));var Dr;(function(i){i.web="Web",i.webCreator="WebCreator",i.webEmbedded="WebEmbedded",i.tvEmbedded="TvEmbedded",i.ios="Ios",i.android="Android",i.mweb="MWeb",i.tv="Tv"})(Dr||(Dr={}));var $=Qe(),Lo=he(),Ir=R(),ji=Io(Or()),Ur=class Ur{static async getApiResponses(e,t){var c;let r={web:t.includes("web")?$.Web.getPlayerResponse(e):Promise.reject(null),webCreator:t.includes("webCreator")?$.WebCreator.getPlayerResponse(e):Promise.reject(null),webEmbedded:t.includes("webEmbedded")?$.WebEmbedded.getPlayerResponse(e):Promise.reject(null),tvEmbedded:t.includes("tvEmbedded")?$.TvEmbedded.getPlayerResponse(e):Promise.reject(null),ios:t.includes("ios")?$.Ios.getPlayerResponse(e):Promise.reject(null),android:t.includes("android")?$.Android.getPlayerResponse(e):Promise.reject(null),mweb:t.includes("mweb")?$.MWeb.getPlayerResponse(e):Promise.reject(null),tv:t.includes("tv")?$.Tv.getPlayerResponse(e):Promise.reject(null)},n=await Promise.allSettled(Object.values(r)),l={web:null,webCreator:null,webEmbedded:null,tvEmbedded:null,ios:null,android:null,mweb:null,tv:null};t.forEach(s=>{var a;l[s]=((a=ji.default.checkResponse(n[Lr[s]],Dr[s]))==null?void 0:a.contents)||null});let u=n.every(s=>s.status==="rejected");if(u){let s=`All player APIs responded with an error. (Clients: ${t.join(", ")})
For details, specify \`logDisplay: ["debug", "info", "success", "warning", "error"]\` in the constructor options of the YtdlCore class.`;if(l.ios&&!l.ios.videoDetails)throw new Lo.UnrecoverableError(s+`
Note: This error cannot continue processing. (Details: ${JSON.stringify(l.ios.playabilityStatus.reason)})`,l.ios.playabilityStatus.reason);if(!l.web){Ir.Logger.info("As a fallback to obtain the minimum information, the web client is forced to adapt.");let a=(await Promise.allSettled([$.Web.getPlayerResponse(e)]))[0];l.web=((c=ji.default.checkResponse(a,"Web"))==null?void 0:c.contents)||null}Ir.Logger.error(s),Ir.Logger.info("Only minimal information is available, as information from the Player API is not available.")}return{isMinimalMode:u,responses:l}}};o(Ur,"PlayerApi");var Nr=Ur;Oe.default=Nr});var Wi=b(Ie=>{"use strict";var Do=Ie&&Ie.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ie,"__esModule",{value:!0});var No=Qe(),Uo=Do(Or()),qr=class qr{static async getApiResponses(e){var l;let t={web:No.Web.getNextResponse(e)},r=await Promise.allSettled(Object.values(t));return{web:((l=Uo.default.checkResponse(r[0],"Next"))==null?void 0:l.contents)||null}}};o(qr,"NextApi");var kr=qr;Ie.default=kr});var Xi=b(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});var Hr=k(),ko=R(),qo=/^\d+$/,Ho=/^(?:(?:(\d+):)?(\d{1,2}):)?(\d{1,2})(?:\.(\d{3}))?$/,Bo=/(-?\d+)(ms|s|m|h)/g,ut={ms:1,s:1e3,m:6e4,h:36e5};function xo(i){if(typeof i=="number")return i;if(qo.test(i))return+i;let e=Ho.exec(i);if(e)return+(e[1]||0)*ut.h+ +(e[2]||0)*ut.m+ +e[3]*ut.s+ +(e[4]||0);{let t=0;for(let r of i.matchAll(Bo))t+=+r[1]*ut[r[2]];return t}}o(xo,"parseTimestamp");function G(i){return i&&i.runs?i.runs[0].text:i?i.simpleText:""}o(G,"getText");function zi(i){return!!(i&&i.find(e=>e.metadataBadgeRenderer.tooltip==="Verified"))}o(zi,"isVerified");function Fo(i,e="en"){let t=new Date,r=Math.floor((t.getTime()-i.getTime())/1e3),n=new Intl.RelativeTimeFormat(e,{numeric:"always"});return r<60?n.format(-r,"second"):r<3600?n.format(-Math.floor(r/60),"minute"):r<86400?n.format(-Math.floor(r/3600),"hour"):r<2592e3?n.format(-Math.floor(r/86400),"day"):r<31536e3?n.format(-Math.floor(r/2592e3),"month"):n.format(-Math.floor(r/31536e3),"year")}o(Fo,"getRelativeTime");function Gi(i){let e=i.slice(-1).toUpperCase(),t=parseFloat(i.slice(0,-1));switch(e){case"K":return t*1e3;case"M":return t*1e6;case"B":return t*1e9;default:return parseFloat(i)}}o(Gi,"parseStringToNumber");function Yi(i){var e,t;if(!i)return null;try{let r=G(i.viewCountText),n=G(i.shortViewCountText);/^\d/.test(n)||(n=""),r=(/^\d/.test(r)?r:n).split(" ")[0];let l=i.shortBylineText.runs[0].navigationEndpoint.browseEndpoint,u=l.browseId,c=G(i.shortBylineText),s=decodeURIComponent((l.canonicalBaseUrl||"").split("/").slice(-1)[0]||""),a=G(i.publishedTimeText),d=n.split(" ")[0];return{id:i.videoId,title:G(i.title),published:a||null,author:{id:u,name:c,user:s,channelUrl:`https://www.youtube.com/channel/${u}`,userUrl:"https://www.youtube.com/"+(s.includes("@")?s:"user/"+s),thumbnails:(e=i.channelThumbnail.thumbnails||[])==null?void 0:e.map(h=>(h.url=new URL(h.url,Hr.Url.getBaseUrl()).toString(),h)),subscriberCount:null,verified:zi(i.ownerBadges||[])},shortViewCountText:d,viewCount:parseInt(r.replace(/,/g,"")),lengthSeconds:i.lengthText?Math.floor(xo(G(i.lengthText))/1e3):null,thumbnails:i.thumbnail.thumbnails||[],richThumbnails:i.richThumbnail?((t=i.richThumbnail.movingThumbnailRenderer.movingThumbnailDetails)==null?void 0:t.thumbnails)||[]:[],isLive:!!(i.badges&&i.badges.find(h=>h.metadataBadgeRenderer.label==="LIVE NOW"))}}catch(r){return ko.Logger.debug(`<error>Failed</error> to parse related video (ID: ${(i==null?void 0:i.videoId)||"Unknown"}): <error>${r}</error>`),null}}o(Yi,"parseRelatedVideo");var Fr=class Fr{static getMedia(e){var n;if(!e)return null;let t={category:"",categoryUrl:"",thumbnails:[]},r=null;try{r=((n=e.microformat)==null?void 0:n.playerMicroformatRenderer)||null}catch{}if(!r)return null;try{t.category=r.category,t.thumbnails=r.thumbnail.thumbnails||[],t.category==="Music"?t.categoryUrl=Hr.Url.getBaseUrl()+"/music":t.category==="Gaming"&&(t.categoryUrl=Hr.Url.getBaseUrl()+"/gaming")}catch{}return t}static getAuthor(e){if(!e)return null;let t=null,r=null,n=null,l=[],u=null,c=!1,s=null;try{let a=e.contents.twoColumnWatchNextResults.results.results.contents.find(d=>d.videoSecondaryInfoRenderer);s=a==null?void 0:a.videoSecondaryInfoRenderer}catch{}if(!s||!s.owner)return null;try{let a=s.owner.videoOwnerRenderer;t=a.title.runs[0].text||null,r=a.navigationEndpoint.browseEndpoint.browseId||null,n=a.navigationEndpoint.browseEndpoint.canonicalBaseUrl.replace("/","")||null,l=a.thumbnail.thumbnails||[],u=Math.floor(Gi(a.subscriberCountText.simpleText.split(" ")[0]))||null,c=zi(a.badges||[])}catch{}try{return{id:r||"",name:t||"",user:n||"",channelUrl:r?`https://www.youtube.com/channel/${r}`:"",externalChannelUrl:r?`https://www.youtube.com/channel/${r}`:"",userUrl:"https://www.youtube.com"+n,thumbnails:l,subscriberCount:u,verified:c}}catch{return null}}static getAuthorFromPlayerResponse(e){var d,y,h;let t=null,r=null,n=null,l=[],u=null,c=!1,s=null,a=null;try{s=((d=e.microformat)==null?void 0:d.playerMicroformatRenderer)||null,a=(h=(y=e.endscreen)==null?void 0:y.endscreenRenderer.elements.find(f=>f.endscreenElementRenderer.style==="CHANNEL"))==null?void 0:h.endscreenElementRenderer}catch{}if(!s)return null;try{t=s.ownerChannelName||null,r=s.externalChannelId,n="@"+(s.ownerProfileUrl||"").split("@")[1],l=a.image.thumbnails||[],u=null,c=!1}catch{}try{return{id:r||"",name:t||"",user:n||"",channelUrl:r?`https://www.youtube.com/channel/${r}`:"",externalChannelUrl:r?`https://www.youtube.com/channel/${r}`:"",userUrl:"https://www.youtube.com/"+n,thumbnails:l,subscriberCount:u,verified:c}}catch{return null}}static getLikes(e){if(!e)return null;try{let t=e.contents.twoColumnWatchNextResults.results.results.contents,r=t.find(s=>s.videoPrimaryInfoRenderer),n=r.videoPrimaryInfoRenderer.videoActions.menuRenderer.topLevelButtons,l=n.filter(s=>s.segmentedLikeDislikeButtonViewModel)[0].segmentedLikeDislikeButtonViewModel.likeButtonViewModel.likeButtonViewModel.toggleButtonViewModel.toggleButtonViewModel.defaultButtonViewModel.buttonViewModel,u=l.accessibilityText,c=l.title;if(u){let s=u.match(/[\d,.]+/)||[];return parseInt((s[0]||"").replace(/\D+/g,""))}else if(c)return Gi(c);return null}catch{return null}}static getRelatedVideos(e){if(!e)return[];let t=[];try{t=e.contents.twoColumnWatchNextResults.secondaryResults.secondaryResults.results}catch{}let r=[];for(let n of t){let l=n.compactVideoRenderer;if(l){let u=Yi(l);u&&r.push(u)}else{let u=n.compactAutoplayRenderer||n.itemSectionRenderer;if(!u||!Array.isArray(u.contents))continue;for(let c of u.contents){let s=Yi(c.compactVideoRenderer);s&&r.push(s)}}}return r}static cleanVideoDetails(e,t,r="en"){let n=e;n.thumbnail&&(n.thumbnails=n.thumbnail.thumbnails);let l=n.shortDescription||G(n.description);if(l&&(n.description=l),typeof n.thumbnail<"u"&&delete n.thumbnail,typeof n.shortDescription<"u"&&delete n.shortDescription,t){n.lengthSeconds=parseInt(t.lengthSeconds||e.lengthSeconds.toString()),n.publishDate=t.publishDate||e.publishDate||null,n.published=null;try{n.publishDate&&(n.published=Fo(new Date(n.publishDate),r)||null)}catch{}}return n.lengthSeconds&&(n.lengthSeconds=parseInt(n.lengthSeconds)),n.viewCount&&(n.viewCount=parseInt(n.viewCount)),n}static getStoryboards(e){if(!e||!e.storyboards)return[];let t=e.storyboards&&e.storyboards.playerStoryboardSpecRenderer&&e.storyboards.playerStoryboardSpecRenderer.spec&&e.storyboards.playerStoryboardSpecRenderer.spec.split("|");if(!t)return[];let r=new URL(t.shift()||"");return t.map((n,l)=>{let[u,c,s,a,d,y,h,f]=n.split("#");r.searchParams.set("sigh",f),s=parseInt(s,10),a=parseInt(a,10),d=parseInt(d,10);let p=Math.ceil(s/(a*d));return{templateUrl:r.toString().replace("$L",l.toString()).replace("$N",h),thumbnailWidth:parseInt(u,10),thumbnailHeight:parseInt(c,10),thumbnailCount:s,interval:parseInt(y,10),columns:a,rows:d,storyboardCount:p}})}static getChapters(e){if(!e)return[];let t=e.playerOverlays&&e.playerOverlays.playerOverlayRenderer,r=t&&t.decoratedPlayerBarRenderer&&t.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer&&t.decoratedPlayerBarRenderer.decoratedPlayerBarRenderer.playerBar,n=r&&r.multiMarkersPlayerBarRenderer&&r.multiMarkersPlayerBarRenderer.markersMap,l=Array.isArray(n)&&n.find(c=>c.value&&Array.isArray(c.value.chapters));return l?l.value.chapters.map(c=>({title:G(c.chapterRenderer.title),startTime:c.chapterRenderer.timeRangeStartMillis/1e3})):[]}};o(Fr,"InfoExtras");var Br=Fr;xr.default=Br});var Kr=b(ae=>{"use strict";var ct=ae&&ae.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ae,"__esModule",{value:!0});ae._getBasicInfo=Zi;ae.getBasicInfo=Zo;var $o=pr(),Ji=v(),Le=R(),Vo=ct(ye()),Vr=k(),jo=st(),Ko=Rr(),Wo=ct(Ki()),Go=ct(Wi()),A=ct(Xi()),Yo=["support.google.com/youtube/?p=age_restrictions","youtube.com/t/community_guidelines"],zo=["web","webCreator","webEmbedded","ios","android","mweb","tv","tvEmbedded"],Qi=["web","mweb","tv","ios"],jr=Ji.Platform.getShim(),$r=jr.cache,Xo={videoDetails:{videoUrl:"",videoId:"",playabilityStatus:"UNKNOWN",title:"",author:null,lengthSeconds:0,viewCount:0,likes:null,media:null,storyboards:[],chapters:[],thumbnails:[],description:null,keywords:[],channelId:"",ageRestricted:!1,allowRatings:!1,isOwnerViewing:!1,isCrawlable:!1,isPrivate:!1,isUnpluggedCorpus:!1,isLiveContent:!1,isUpcoming:!1,isLowLatencyLiveStream:!1,liveBroadcastDetails:{isLiveNow:!1,startTimestamp:""},published:null,publishDate:null,latencyClass:null},relatedVideos:[],formats:[],full:!1,_metadata:{isMinimumMode:!1,clients:[],html5PlayerUrl:"",id:"",options:{}},_ytdl:{version:jr.info.version}},Qo=JSON.stringify(Xo);function Jo(i,e){return(!i||i&&i.length===0)&&(Le.Logger.warning("At least one client must be specified."),i=Qi),i=i.filter(t=>zo.includes(t)),e?i:[...new Set([...Qi,...i])]}o(Jo,"setupClients");async function Zi(i,e,t){var Ue,ke,qe,He,ue,ce,ee,Be;let r=Ji.Platform.getShim(),n=(0,jo.getHtml5Player)(e);if(e.oauth2&&e.oauth2 instanceof $o.OAuth2&&e.oauth2.shouldRefreshToken()&&(Le.Logger.info("The specified OAuth2 token has expired and will be renewed automatically."),await e.oauth2.refreshAccessToken()),!e.poToken&&!e.disablePoTokenAutoGeneration){Le.Logger.warning("Specify poToken for stable and fast operation. See README for details."),Le.Logger.info("Automatically generates poToken, but stable operation cannot be guaranteed.");let{poToken:E,visitorData:C}=await r.poToken();e.poToken=E,e.visitorData=C}e.poToken&&!e.visitorData&&Le.Logger.warning("If you specify a poToken, you must also specify the visitorData."),e.clients=Jo(e.clients,(Ue=e.disableDefaultClients)!=null?Ue:!1);let l=await n,u=l.url,c=parseInt(l.signatureTimestamp||"0")||0,s={videoId:i,signatureTimestamp:c,options:e},a=JSON.parse(Qo),d={playerApiRequest:Wo.default.getApiResponses(s,e.clients),nextApiRequest:Go.default.getApiResponses(s)},{isMinimalMode:y,responses:h}=await d.playerApiRequest,f=await d.nextApiRequest,p=Object.values(h)||[];a._metadata.isMinimumMode=y,a._metadata.html5PlayerUrl=u,a._metadata.clients=e.clients,a._metadata.options=e,a._metadata.id=i,(e.includesPlayerAPIResponse||t)&&(a._playerApiResponses=h),(e.includesNextAPIResponse||t)&&(a._nextApiResponses=f);function _(E,C,de){try{return E.filter(xe=>typeof xe=="object"&&xe!==null&&xe[C]&&(de?xe[C]===de:!0))[0]}catch{return}}o(_,"getValue");let m=_(p,"storyboards")||null,Z=((ke=_(p,"videoDetails"))==null?void 0:ke.videoDetails)||{},X=((qe=_(p,"microformat"))==null?void 0:qe.microformat)||null,wt=((ce=(ue=(He=h.web)==null?void 0:He.microformat)==null?void 0:ue.playerMicroformatRenderer)==null?void 0:ce.liveBroadcastDetails)||null,Et=A.default.getStoryboards(m),le=A.default.getMedia(h.web)||A.default.getMedia(h.webCreator)||A.default.getMedia(h.ios)||A.default.getMedia(h.android)||A.default.getMedia(h.webEmbedded)||A.default.getMedia(h.tvEmbedded)||A.default.getMedia(h.mweb)||A.default.getMedia(h.tv),Pt=!!le&&Yo.some(E=>Object.values(le||{}).some(C=>typeof C=="string"&&C.includes(E))),St={videoUrl:Vr.Url.getWatchPageUrl(i),author:A.default.getAuthor(f.web),media:le,likes:A.default.getLikes(f.web),ageRestricted:Pt,storyboards:Et,chapters:A.default.getChapters(f.web),thumbnails:[],description:""},At=p.reduce((E,C)=>[...E,...Ko.FormatParser.parseFormats(C)],[]);return a.videoDetails=A.default.cleanVideoDetails(Object.assign(a.videoDetails,Z,St),(X==null?void 0:X.playerMicroformatRenderer)||null,e.hl),a.videoDetails.playabilityStatus=((ee=_(p,"playabilityStatus","OK"))==null?void 0:ee.playabilityStatus.status)||((Be=p[0])==null?void 0:Be.playabilityStatus.status)||"UNKNOWN",a.videoDetails.liveBroadcastDetails=wt,a.relatedVideos=e.includesRelatedVideo?A.default.getRelatedVideos(f.web):[],a.formats=At.filter(Boolean),a}o(Zi,"_getBasicInfo");async function Zo(i,e){jr.runtime!=="serverless"&&Vo.default.checkForUpdates();let t=Vr.Url.getVideoID(i)||(Vr.Url.validateID(i)?i:null);if(!t)throw new Error("The URL specified is not a valid URL.");let r=["getBasicInfo",t,e.hl,e.gl].join("-");if(await $r.has(r))return $r.get(r);let n=await Zi(t,e,!1);return $r.set(r,n,{ttl:60*30}),n}o(Zo,"getBasicInfo")});var en=b(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.FORMATS=void 0;var es={5:{mimeType:'video/flv; codecs="Sorenson H.283, mp3"',qualityLabel:"240p",bitrate:25e4,audioBitrate:64},6:{mimeType:'video/flv; codecs="Sorenson H.263, mp3"',qualityLabel:"270p",bitrate:8e5,audioBitrate:64},13:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:null,bitrate:5e5,audioBitrate:null},17:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"144p",bitrate:5e4,audioBitrate:24},18:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},22:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},34:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},35:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},36:{mimeType:'video/3gp; codecs="MPEG-4 Visual, aac"',qualityLabel:"240p",bitrate:175e3,audioBitrate:32},37:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},38:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"3072p",bitrate:35e5,audioBitrate:192},43:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},44:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"480p",bitrate:1e6,audioBitrate:128},45:{mimeType:'video/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},46:{mimeType:'audio/webm; codecs="vp8, vorbis"',qualityLabel:"1080p",bitrate:null,audioBitrate:192},82:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:96},83:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"240p",bitrate:5e5,audioBitrate:96},84:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:192},85:{mimeType:'video/mp4; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:192},91:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"144p",bitrate:1e5,audioBitrate:48},92:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},93:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"360p",bitrate:5e5,audioBitrate:128},94:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:8e5,audioBitrate:128},95:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:15e5,audioBitrate:256},96:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:256},100:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:128},101:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"360p",bitrate:null,audioBitrate:192},102:{mimeType:'audio/webm; codecs="VP8, vorbis"',qualityLabel:"720p",bitrate:null,audioBitrate:192},120:{mimeType:'video/flv; codecs="H.264, aac"',qualityLabel:"720p",bitrate:2e6,audioBitrate:128},127:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},128:{mimeType:'audio/ts; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:96},132:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"240p",bitrate:15e4,audioBitrate:48},133:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"240p",bitrate:2e5,audioBitrate:null},134:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"360p",bitrate:3e5,audioBitrate:null},135:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},136:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:1e6,audioBitrate:null},137:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},138:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"4320p",bitrate:135e5,audioBitrate:null},139:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:48},140:{mimeType:'audio/m4a; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:128},141:{mimeType:'audio/mp4; codecs="aac"',qualityLabel:null,bitrate:null,audioBitrate:256},151:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:5e4,audioBitrate:24},160:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"144p",bitrate:1e5,audioBitrate:null},171:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:128},172:{mimeType:'audio/webm; codecs="vorbis"',qualityLabel:null,bitrate:null,audioBitrate:192},231:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},232:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:8e5,audioBitrate:null},242:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p",bitrate:1e5,audioBitrate:null},243:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p",bitrate:25e4,audioBitrate:null},244:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"480p",bitrate:5e5,audioBitrate:null},247:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:7e5,audioBitrate:null},248:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p",bitrate:15e5,audioBitrate:null},249:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:48},250:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:64},251:{mimeType:'audio/webm; codecs="opus"',qualityLabel:null,bitrate:null,audioBitrate:160},264:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1440p",bitrate:4e6,audioBitrate:null},266:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"2160p",bitrate:125e5,audioBitrate:null},270:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},271:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p",bitrate:9e6,audioBitrate:null},272:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"4320p",bitrate:2e7,audioBitrate:null},278:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p 30fps",bitrate:8e4,audioBitrate:null},298:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"720p",bitrate:3e6,audioBitrate:null},299:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:55e5,audioBitrate:null},300:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"720p",bitrate:1318e3,audioBitrate:48},301:{mimeType:'video/ts; codecs="H.264, aac"',qualityLabel:"1080p",bitrate:3e6,audioBitrate:128},302:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HFR",bitrate:25e5,audioBitrate:null},303:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HFR",bitrate:5e6,audioBitrate:null},308:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HFR",bitrate:1e7,audioBitrate:null},311:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p",bitrate:125e4,audioBitrate:null},312:{mimeType:'video/mp4; codecs="H.264"',qualityLabel:"1080p",bitrate:25e5,audioBitrate:null},313:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p",bitrate:13e6,audioBitrate:null},315:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HFR",bitrate:2e7,audioBitrate:null},330:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"144p HDR, HFR",bitrate:8e4,audioBitrate:null},331:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:1e5,audioBitrate:null},332:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"360p HDR, HFR",bitrate:25e4,audioBitrate:null},333:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"240p HDR, HFR",bitrate:5e5,audioBitrate:null},334:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"720p HDR, HFR",bitrate:1e6,audioBitrate:null},335:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1080p HDR, HFR",bitrate:15e5,audioBitrate:null},336:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"1440p HDR, HFR",bitrate:5e6,audioBitrate:null},337:{mimeType:'video/webm; codecs="VP9"',qualityLabel:"2160p HDR, HFR",bitrate:12e6,audioBitrate:null}};dt.FORMATS=es});var ft=b(oe=>{"use strict";var ts=oe&&oe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(oe,"__esModule",{value:!0});oe.FormatUtils=void 0;var rs=en(),is=ts(ye()),ns=["mp4a","mp3","vorbis","aac","opus","flac"],as=["mp4v","avc1","Sorenson H.283","MPEG-4 Visual","VP8","VP9","av01","H.264"];function tn(i,e){return i.findIndex(t=>e.codec.text&&e.codec.text.includes(t))}o(tn,"getEncodingRank");function rn(i){return i.bitrate||0}o(rn,"getVideoBitrate");function nn(i){return tn(as,i)}o(nn,"getVideoEncodingRank");function an(i){return i.audioBitrate||0}o(an,"getAudioBitrate");function on(i){return tn(ns,i)}o(on,"getAudioEncodingRank");function zr(i,e,t){let r=0;for(let n of t)if(r=n(e)-n(i),r!==0)break;return r}o(zr,"sortFormatsBy");function os(i){return parseInt(i.quality.label)||0}o(os,"getQualityLabel");function Wr(i,e){return zr(i,e,[os,rn,nn])}o(Wr,"sortFormatsByVideo");function Gr(i,e){return zr(i,e,[an,on])}o(Gr,"sortFormatsByAudio");function ss(i,e){let t=o(r=>e.find(n=>`${n.itag}`==`${r}`)||null,"getFormat");if(Array.isArray(i)){let r=i.find(n=>t(n));return r&&t(r)||null}else return t(i||"")||null}o(ss,"getFormatByQuality");var Xr=class Xr{static sortFormats(e,t){return zr(e,t,[r=>+!!r.isHLS,r=>+!!r.isDashMPD,r=>+(parseInt(r.contentLength)>0),r=>+(r.hasVideo&&r.hasAudio),r=>+r.hasVideo,r=>parseInt(r.quality.label)||0,rn,an,nn,on])}static filterFormats(e,t){let r;switch(t){case"videoandaudio":case"audioandvideo":{r=o(n=>n.hasVideo&&n.hasAudio,"fn");break}case"video":{r=o(n=>n.hasVideo,"fn");break}case"videoonly":{r=o(n=>n.hasVideo&&!n.hasAudio,"fn");break}case"audio":{r=o(n=>n.hasAudio,"fn");break}case"audioonly":{r=o(n=>n.hasAudio&&!n.hasVideo,"fn");break}default:if(typeof t=="function")r=t;else throw new TypeError(`Given filter (${t}) is not supported`)}return e.filter(n=>!!n.url&&r(n))}static chooseFormat(e,t){if(typeof t.format=="object"){if(!t.format.url)throw new Error("Invalid format given, did you use `ytdl.getFullInfo()`?");return t.format}t.filter&&(e=this.filterFormats(e,t.filter)),t.excludingClients&&(e=e.filter(l=>{var u;return!((u=t.excludingClients)!=null&&u.includes(l.sourceClientName))})),t.includingClients&&t.includingClients!=="all"&&(e=e.filter(l=>{var u;return(u=t.includingClients)==null?void 0:u.includes(l.sourceClientName)})),e.some(l=>l.isHLS)&&(e=e.filter(l=>l.isHLS||!l.isLive));let r=t.quality||"highest",n;switch(r){case"highest":{n=e[0];break}case"lowest":{n=e[e.length-1];break}case"highestaudio":{e=this.filterFormats(e,"audio"),e.sort(Gr);let l=e[0];e=e.filter(c=>Gr(l,c)===0);let u=e.map(c=>parseInt(c.quality.label)||0).sort((c,s)=>c-s)[0];n=e.find(c=>(parseInt(c.quality.label)||0)===u);break}case"lowestaudio":{e=this.filterFormats(e,"audio"),e.sort(Gr),n=e[e.length-1];break}case"highestvideo":{e=this.filterFormats(e,"video"),e.sort(Wr);let l=e[0];e=e.filter(c=>Wr(l,c)===0);let u=e.map(c=>c.audioBitrate||0).sort((c,s)=>c-s)[0];n=e.find(c=>(c.audioBitrate||0)===u);break}case"lowestvideo":{e=this.filterFormats(e,"video"),e.sort(Wr),n=e[e.length-1];break}default:{n=ss(r,e);break}}if(!n)throw new Error(`No such format found: ${r}`);return n}static getClientName(e){try{switch(new URL(e).searchParams.get("c")){case"WEB":return"web";case"MWEB":return"mweb";case"WEB_CREATOR":return"webCreator";case"WEB_EMBEDDED_PLAYER":return"webEmbedded";case"IOS":return"ios";case"ANDROID":return"android";case"TVHTML5_SIMPLY_EMBEDDED_PLAYER":return"tvEmbedded";case"TVHTML5":return"tv";default:return"unknown"}}catch{return"unknown"}}static addFormatMeta(e,t){var a;let r=e.itag,n=rs.FORMATS[r]||null,l=e.mimeType&&is.default.between(e.mimeType,'codecs="','"'),u=/\/manifest\/hls_(variant|playlist)\//.test(e.url),c={itag:r,url:e.url,mimeType:e.mimeType||"video/mp4",codec:{text:l||"h264",video:null,audio:null},quality:{text:e.quality,label:e.qualityLabel||(u?"video":"audio")},bitrate:e.bitrate||(n==null?void 0:n.bitrate)||NaN,audioBitrate:(n==null?void 0:n.audioBitrate)||NaN,contentLength:e.contentLength,container:((a=e.mimeType)==null?void 0:a.split(";")[0].split("/")[1])||null,hasVideo:!!e.qualityLabel||!e.audioQuality,hasAudio:!!e.audioQuality,isLive:/\bsource[/=]yt_live_broadcast\b/.test(e.url),isHLS:u,isDashMPD:/\/manifest\/dash\//.test(e.url),sourceClientName:u?"ios":this.getClientName(e.url)||"unknown"},s=c.codec.text.split(", ");return t&&(c.originalData=e),c.codec.video=c.hasVideo?s[0]:null,c.codec.audio=c.hasAudio?s[1]||s[0]:null,c}};o(Xr,"FormatUtils");var Yr=Xr;oe.FormatUtils=Yr});var un=b(De=>{"use strict";var ls=De&&De.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(De,"__esModule",{value:!0});De.getFullInfo=gs;var us=at(),cs=v(),ds=ls(ye()),sn=k(),ln=ft(),fs=Rr(),hs=Kr(),bs=st(),Qr=cs.Platform.getShim().cache,Jr=new us.Signature;async function ps(i,e){var s;let t=(0,bs.getHtml5Player)(e),r=await(0,hs._getBasicInfo)(i,e,!0),n=Object.assign({},r),l=[],u=await t;u.id&&u.body&&(await Jr.getDecipherFunctions(u.id,u.body),await Jr.getNTransform(u.id,u.body));try{let a=r.formats;l.push(Jr.decipherFormats(a)),e.parsesHLSFormat&&((s=n._playerApiResponses)!=null&&s.ios)&&l.push(...fs.FormatParser.parseAdditionalManifests(n._playerApiResponses.ios,e))}catch{}let c=Object.values(Object.assign({},...await Promise.all(l)));return n.formats=c.map(a=>{var d;return ln.FormatUtils.addFormatMeta(a,(d=e.includesOriginalFormatData)!=null?d:!1)}),n.formats.sort(ln.FormatUtils.sortFormats),n.full=!0,e.includesPlayerAPIResponse||delete n._playerApiResponses,e.includesNextAPIResponse||delete n._nextApiResponses,n}o(ps,"_getFullInfo");async function gs(i,e){ds.default.checkForUpdates();let t=sn.Url.getVideoID(i)||(sn.Url.validateID(i)?i:null);if(!t)throw new Error("The URL specified is not a valid URL.");let r=["getFullInfo",t,e.hl,e.gl].join("-");if(await Qr.has(r))return Qr.get(r);let n=await ps(t,e);return Qr.set(r,n,{ttl:60*30}),n}o(gs,"getFullInfo")});var Zr=b(Y=>{"use strict";var ms=Y&&Y.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),cn=Y&&Y.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ms(e,i,t)};Object.defineProperty(Y,"__esModule",{value:!0});cn(Kr(),Y);cn(un(),Y)});var gn=b(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.download=As;bt.downloadFromInfo=Ss;var ys=Zr(),dn=ft(),ht=R(),ei=v(),_s=ge(),Ts={method:"GET",headers:{accept:"*/*",origin:"https://www.youtube.com",referer:"https://www.youtube.com",DNT:"?1"},redirect:"follow"},hn=ei.Platform.getShim().polyfills.ReadableStream;function bn(i,e,t){if(typeof t.rewriteRequest=="function"){let{url:r}=t.rewriteRequest(i,e,{isDownloadUrl:!0});i=r}if(t.originalProxy)try{let r=new URL(t.originalProxy.download);i.includes(r.host)||(i=`${r.protocol}//${r.host}${r.pathname}?${t.originalProxy.urlQueryName||"url"}=${encodeURIComponent(i)}`)}catch(r){ht.Logger.debug("[ OriginalProxy ]: The original proxy could not be adapted due to the following error: "+r)}return i}o(bn,"requestSetup");async function ws(i,e){return new Promise(t=>{let r=o(l=>{l.status===200?(ht.Logger.debug(`[ ${i.sourceClientName} ]: <success>Video URL is normal.</success> The response was received with status code <success>"${l.status}"</success>.`),t({valid:!0})):n(new Error(`Status code: ${l.status}`))},"successResponseHandler"),n=o(l=>{ht.Logger.debug(`[ ${i.sourceClientName} ]: The URL for the video <error>did not return a successful response</error>. Got another format.
Reason: <error>${l.message}</error>`),t({valid:!1,reason:l.message})},"errorResponseHandler");try{let l=bn(i.url,{},e);ei.Platform.getShim().fetcher(l,{method:"HEAD"}).then(u=>r(u),u=>n(u))}catch(l){n(l)}})}o(ws,"isDownloadUrlValid");function Es(i,e){return new Promise(async t=>{let r=["web"],n,l=!1;try{n=dn.FormatUtils.chooseFormat(i,e)}catch(u){throw u}if(!n)throw new Error("Failed to retrieve format data.");for(;l===!1;){if(!n)throw new Error("Failed to retrieve format data.");let{valid:u,reason:c}=await ws(n,e);if(u)l=!0;else{n.sourceClientName!=="unknown"&&r.push(n.sourceClientName);try{n=dn.FormatUtils.chooseFormat(i,{excludingClients:r,includingClients:c!=null&&c.includes("403")?["ios","android"]:"all",quality:e.quality,filter:e.filter})}catch(s){throw s}}}t(n)})}o(Es,"getValidDownloadUrl");async function*Ps(i){if(i instanceof hn){let e=i.getReader();try{for(;;){let{done:t,value:r}=await e.read();if(t)return;yield r}}finally{e.releaseLock()}}else try{for await(let e of i)yield e}finally{i.destroy()}}o(Ps,"streamToIterable");function fn(i,e,t,r){i=bn(i,e,t),ht.Logger.debug("[ Download ]: Requesting URL: <magenta>"+i+"</magenta>");let n=r?{...e,signal:r.signal}:e;return ei.Platform.getShim().fetcher(i,n)}o(fn,"downloadVideo");async function pn(i,e){if(!i.formats.length)throw new Error("This video is not available due to lack of video format.");let t=typeof e.dlChunkSize=="number"?e.dlChunkSize:1024*1024*10,r=(e.filter==="audioandvideo"||e.filter==="videoandaudio")&&!e.range,n=await Es(i.formats,e),l={...Ts},u=e.range?e.range.start:0,c=e.range&&e.range.end||t,s=!1,a,d=n.sourceClientName==="ios"||n.sourceClientName==="android"?n.sourceClientName:n.sourceClientName.includes("tv")?"tv":"desktop";if(l.headers={...l.headers,"User-Agent":_s.UserAgent.getRandomUserAgent(d)},r){let h=await fn(n.url,l,e);if(!h.ok)throw new Error(`Download failed with status code <warning>"${h.status}"</warning>.`);let f=h.body;if(!f)throw new Error("Failed to retrieve response body.");return f}return new hn({start(){},pull:o(async h=>{if(s){h.close();return}let f=n.contentLength?parseInt(n.contentLength):0;return(c>=f||e.range)&&(s=!0),new Promise(async(p,_)=>{try{a=new AbortController;let m=await fn(n.url+"&range="+u+"-"+c,l,e,a);if(!m.ok)throw new Error(`Download failed with status code <warning>"${m.status}"</warning>.`);let Z=m.body;if(!Z)throw new Error("Failed to retrieve response body.");for await(let X of Ps(Z))h.enqueue(X);u=c+1,c+=t,p()}catch(m){_(m)}})},"pull"),async cancel(h){a.abort(h)}},{highWaterMark:e.highWaterMark||1024*512,size(h){return(h==null?void 0:h.byteLength)||0}})}o(pn,"downloadFromInfoCallback");async function Ss(i,e){if(!i.full)throw new Error("Cannot use `ytdl.downloadFromInfo()` when called with info from `ytdl.getBasicInfo()`");return await pn(i,{...e})}o(Ss,"downloadFromInfo");function As(i,e){return new Promise(t=>{(0,ys.getFullInfo)(i,e).then(r=>{t(pn(r,{...e}))}).catch(r=>{throw r})})}o(As,"download")});var mn=b(J=>{"use strict";var Rs=J&&J.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),vs=J&&J.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Rs(e,i,t)};Object.defineProperty(J,"__esModule",{value:!0});vs(gn(),J)});var Pn=b(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.YtdlCore=void 0;var pt=v(),yn=mn(),_n=Zr(),Tn=st(),gt=pr(),mt=k(),wn=ft(),Cs=pe(),z=R(),Ms=at(),En=pt.Platform.getShim(),Os=En.cache,V=En.fileCache,ti=class ti{constructor({hl:e,gl:t,rewriteRequest:r,poToken:n,disablePoTokenAutoGeneration:l,visitorData:u,includesPlayerAPIResponse:c,includesNextAPIResponse:s,includesOriginalFormatData:a,includesRelatedVideo:d,clients:y,disableDefaultClients:h,disableRetryRequest:f,oauth2Credentials:p,parsesHLSFormat:_,originalProxy:m,quality:Z,filter:X,excludingClients:wt,includingClients:Et,range:le,begin:Pt,liveBuffer:St,highWaterMark:At,IPv6Block:Ue,dlChunkSize:ke,disableBasicCache:qe,disableFileCache:He,fetcher:ue,logDisplay:ce,noUpdate:ee,disableInitialSetup:Be}={}){this.hl="en",this.gl="US",this.disablePoTokenAutoGeneration=!1,this.includesPlayerAPIResponse=!1,this.includesNextAPIResponse=!1,this.includesOriginalFormatData=!1,this.includesRelatedVideo=!0,this.disableDefaultClients=!1,this.disableRetryRequest=!1,this.oauth2=null,this.parsesHLSFormat=!1,this.excludingClients=[],this.includingClients="all",this.version=Cs.VERSION;let E=pt.Platform.getShim(),C=(ce==="none"?[]:ce)||["info","success","warning","error"];if(E.options.other.logDisplay=C,z.Logger.logDisplay=C,E.options.other.noUpdate=ee!=null?ee:!1,ue&&(E.fetcher=ue,E.requestRelated.originalProxy=m,E.requestRelated.rewriteRequest=r),qe&&Os.disable(),He&&V.disable(),this.hl=e||"en",this.gl=t||"US",this.rewriteRequest=r||void 0,this.disablePoTokenAutoGeneration=l!=null?l:!1,this.includesPlayerAPIResponse=c!=null?c:!1,this.includesNextAPIResponse=s!=null?s:!1,this.includesOriginalFormatData=a!=null?a:!1,this.includesRelatedVideo=d!=null?d:!0,this.clients=y||void 0,this.disableDefaultClients=h!=null?h:!1,this.parsesHLSFormat=_!=null?_:!1,this.disableRetryRequest=f!=null?f:!1,this.originalProxy=m||void 0,this.originalProxy){let de=this.originalProxy.urlQueryName||"url";z.Logger.debug(`<debug>"${this.originalProxy.base}"</debug> is used for <blue>API requests</blue>.`),z.Logger.debug(`<debug>"${this.originalProxy.download}"</debug> is used for <blue>video downloads</blue>.`),z.Logger.debug(`The query name <debug>"${de}"</debug> is used to specify the URL in the request. <blue>(?${de}=...)</blue>`)}this.quality=Z||void 0,this.filter=X||void 0,this.excludingClients=wt||[],this.includingClients=Et||"all",this.range=le||void 0,this.begin=Pt||void 0,this.liveBuffer=St||void 0,this.highWaterMark=At||void 0,this.IPv6Block=Ue||void 0,this.dlChunkSize=ke||void 0,this.init({disableInitialSetup:Be,poToken:n,visitorData:u,oauth2Credentials:p},{originalProxy:m,rewriteRequest:r}),E.options.download={hl:this.hl,gl:this.gl,rewriteRequest:this.rewriteRequest,poToken:this.poToken,disablePoTokenAutoGeneration:this.disablePoTokenAutoGeneration,visitorData:this.visitorData,includesPlayerAPIResponse:this.includesPlayerAPIResponse,includesNextAPIResponse:this.includesNextAPIResponse,includesOriginalFormatData:this.includesOriginalFormatData,includesRelatedVideo:this.includesRelatedVideo,clients:this.clients,disableDefaultClients:this.disableDefaultClients,oauth2Credentials:p,parsesHLSFormat:this.parsesHLSFormat,originalProxy:this.originalProxy,quality:this.quality,filter:this.filter,excludingClients:this.excludingClients,includingClients:this.includingClients,range:this.range,begin:this.begin,liveBuffer:this.liveBuffer,highWaterMark:this.highWaterMark,IPv6Block:this.IPv6Block,dlChunkSize:this.dlChunkSize},pt.Platform.load(E)}async init({disableInitialSetup:e,poToken:t,visitorData:r,oauth2Credentials:n},l={}){if(!e){let u=this.initializeHtml5PlayerCache();await this.setPoToken(t),await this.setVisitorData(r),await this.setOAuth2(n||null),this.disablePoTokenAutoGeneration||this.automaticallyGeneratePoToken(l),await u}}async setPoToken(e){let t=await V.get("poToken");e?this.poToken=e:t&&(z.Logger.debug("PoToken loaded from cache."),this.poToken=t||void 0),V.set("poToken",this.poToken||"",{ttl:60*60*24})}async setVisitorData(e){let t=await V.get("visitorData");e?this.visitorData=e:t&&(z.Logger.debug("VisitorData loaded from cache."),this.visitorData=t||void 0),V.set("visitorData",this.visitorData||"",{ttl:60*60*24})}async setOAuth2(e){let t=await V.get("oauth2")||void 0;try{e?this.oauth2=new gt.OAuth2(e)||void 0:t?this.oauth2=new gt.OAuth2(t):this.oauth2=null}catch{this.oauth2=null}}async initializeHtml5PlayerCache(){await V.get("html5Player")||(z.Logger.debug("To speed up processing, html5Player and signatureTimestamp are pre-fetched and cached."),(0,Tn.getHtml5Player)({}))}automaticallyGeneratePoToken(e){!this.poToken&&!this.visitorData&&(z.Logger.debug("Since PoToken and VisitorData are <warning>not specified</warning>, they are generated <info>automatically</info>."),this.generatePoToken(e).then(({poToken:t,visitorData:r})=>{this.poToken=t,this.visitorData=r,V.set("poToken",this.poToken||"",{ttl:60*60*24}),V.set("visitorData",this.visitorData||"",{ttl:60*60*24})}).catch(()=>{}))}initializeOptions(e){var r;let t={...e,oauth2:this.oauth2};return t.hl=e.hl||this.hl,t.gl=e.gl||this.gl,t.rewriteRequest=e.rewriteRequest||this.rewriteRequest,t.poToken=e.poToken||this.poToken,t.disablePoTokenAutoGeneration=e.disablePoTokenAutoGeneration||this.disablePoTokenAutoGeneration,t.visitorData=e.visitorData||this.visitorData,t.includesPlayerAPIResponse=e.includesPlayerAPIResponse||this.includesPlayerAPIResponse,t.includesNextAPIResponse=e.includesNextAPIResponse||this.includesNextAPIResponse,t.includesOriginalFormatData=e.includesOriginalFormatData||this.includesOriginalFormatData,t.includesRelatedVideo=e.includesRelatedVideo||this.includesRelatedVideo,t.clients=e.clients||this.clients,t.disableDefaultClients=e.disableDefaultClients||this.disableDefaultClients,t.disableRetryRequest=e.disableRetryRequest||this.disableRetryRequest,t.oauth2Credentials=e.oauth2Credentials||((r=this.oauth2)==null?void 0:r.getCredentials()),t.parsesHLSFormat=e.parsesHLSFormat||this.parsesHLSFormat,t.originalProxy=e.originalProxy||this.originalProxy||void 0,t.quality=e.quality||this.quality||void 0,t.filter=e.filter||this.filter||void 0,t.excludingClients=e.excludingClients||this.excludingClients||[],t.includingClients=e.includingClients||this.includingClients||"all",t.range=e.range||this.range||void 0,t.begin=e.begin||this.begin||void 0,t.liveBuffer=e.liveBuffer||this.liveBuffer||void 0,t.highWaterMark=e.highWaterMark||this.highWaterMark||void 0,t.IPv6Block=e.IPv6Block||this.IPv6Block||void 0,t.dlChunkSize=e.dlChunkSize||this.dlChunkSize||void 0,!t.oauth2&&e.oauth2Credentials&&(t.oauth2=new gt.OAuth2(e.oauth2Credentials)),t}generatePoToken(e={}){return new Promise((t,r)=>{let n=pt.Platform.getShim().poToken;n(e).then(l=>{t(l)}).catch(l=>{r(l)})})}download(e,t={}){return(0,yn.download)(e,this.initializeOptions(t))}downloadFromInfo(e,t={}){return(0,yn.downloadFromInfo)(e,this.initializeOptions(t))}getBasicInfo(e,t={}){return(0,_n.getBasicInfo)(e,this.initializeOptions(t))}getFullInfo(e,t={}){return(0,_n.getFullInfo)(e,this.initializeOptions(t))}};o(ti,"YtdlCore");var L=ti;yt.YtdlCore=L;L.chooseFormat=wn.FormatUtils.chooseFormat;L.filterFormats=wn.FormatUtils.filterFormats;L.decipherFormat=function(i){return new Promise(async e=>{let t=await(0,Tn.getHtml5Player)({});if(!t.body)return e(null);let r=new Ms.Signature;await r.getDecipherFunctions(t.id,t.body),await r.getNTransform(t.id,t.body),e(r.decipherFormat(i))})};L.createOAuth2Credentials=gt.OAuth2.createOAuth2Credentials;L.validateID=mt.Url.validateID;L.validateURL=mt.Url.validateURL;L.getURLVideoID=mt.Url.getURLVideoID;L.getVideoID=mt.Url.getVideoID});var An=b(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0})});var vn=b(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0})});var Mn=b(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0})});var In=b(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0})});var Dn=b(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0})});var Nn=b(D=>{"use strict";var Is=D&&D.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),Ne=D&&D.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Is(e,i,t)};Object.defineProperty(D,"__esModule",{value:!0});Ne(An(),D);Ne(vn(),D);Ne(Mn(),D);Ne(In(),D);Ne(Dn(),D)});var kn=b(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0})});var Hn=b(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0})});var xn=b(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0})});var $n=b(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0})});var jn=b(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0})});var Kn=b(I=>{"use strict";var Ls=I&&I.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),se=I&&I.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ls(e,i,t)};Object.defineProperty(I,"__esModule",{value:!0});se(Nn(),I);se(kn(),I);se(Hn(),I);se(xn(),I);se($n(),I);se(jn(),I)});var ks=b(N=>{var Ds=N&&N.__createBinding||(Object.create?function(i,e,t,r){r===void 0&&(r=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(i,r,n)}:function(i,e,t,r){r===void 0&&(r=t),i[r]=e[t]}),Ns=N&&N.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ds(e,i,t)};Object.defineProperty(N,"__esModule",{value:!0});N.YtdlCore=void 0;var Us=v(),_t=pe(),ri=class ri{constructor(e=60){this.ttl=e,this.isDisabled=!1}async getCache(){return await caches.open("ytdlCoreCache")}async get(e){if(this.isDisabled)return null;let t=await this.getCache(),r=await t.match(e);if(r)try{let n=await r.json();return Date.now()>n.expiration?null:n.contents}catch{}return null}async set(e,t,{ttl:r}={ttl:this.ttl}){if(this.isDisabled)return!0;let n=await this.getCache(),l=JSON.stringify({contents:t,expiration:Date.now()+r*1e3}),u=new Response(l,{headers:{"Content-Type":"application/json"}});try{return await n.put(e,u),!0}catch{return!1}}async has(e){return this.isDisabled?!1:await(await this.getCache()).match(e)!==void 0}async delete(e){if(this.isDisabled)return!0;let t=await this.getCache();try{return await t.delete(e)}catch{return!1}}disable(){this.isDisabled=!0}initialization(){}};o(ri,"CacheWithCacheStorage");var Tt=ri;Us.Platform.load({runtime:"browser",server:!1,cache:new Tt,fileCache:new Tt,fetcher:o((i,e)=>fetch(i,e),"fetcher"),poToken:o(async()=>({poToken:"",visitorData:""}),"poToken"),options:{download:{hl:"en",gl:"US",includesPlayerAPIResponse:!1,includesNextAPIResponse:!1,includesOriginalFormatData:!1,includesRelatedVideo:!0,clients:["web","mweb","tv","ios"],disableDefaultClients:!1,disableFileCache:!1,parsesHLSFormat:!0},other:{logDisplay:["info","success","warning","error"],noUpdate:!1}},requestRelated:{rewriteRequest:o((i,e)=>({url:i,options:e}),"rewriteRequest"),originalProxy:null},info:{version:_t.VERSION,repo:{user:_t.USER_NAME,name:_t.REPO_NAME},issuesUrl:_t.ISSUES_URL},polyfills:{Headers,ReadableStream,eval}});var Wn=Pn();Object.defineProperty(N,"YtdlCore",{enumerable:!0,get:o(function(){return Wn.YtdlCore},"get")});Ns(Kn(),N);N.default=Wn.YtdlCore});export default ks();
